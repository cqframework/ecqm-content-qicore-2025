{
  "resourceType": "Library",
  "id": "CMS72FHIRSTKAntithromboticDay2",
  "meta": {
    "profile": [ "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareablelibrary", "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-computablelibrary", "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-publishablelibrary", "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-executablelibrary", "http://hl7.org/fhir/uv/cql/StructureDefinition/cql-library", "http://hl7.org/fhir/uv/cql/StructureDefinition/elm-json-library", "http://hl7.org/fhir/uv/cql/StructureDefinition/elm-xml-library" ]
  },
  "language": "en",
  "text": {
    "status": "extensions",
    "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"col-12\">\n  <table class=\"narrative-table\">\n    <tbody>\n<tr>\n\n<th colspan=\"2\" scope=\"row\" class=\"row-header\">Knowledge Artifact Metadata</th>\n\n</tr>\n\n<tr>\n\n<th scope=\"row\" class=\"row-header\">Name (machine-readable)</th>\n\n<td class=\"content-container\">CMS72FHIRSTKAntithromboticDay2</td>\n</tr>\n\n\n<tr>\n\n<th scope=\"row\" class=\"row-header\">Title (human-readable)</th>\n\n<td class=\"content-container\">CMS72FHIRSTKAntithromboticDay2</td>\n</tr>\n\n\n\n<tr>\n\n<th scope=\"row\" class=\"row-header\">Status</th>\n\n<td class=\"content-container\">active</td>\n</tr>\n\n\n<tr>\n\n<th scope=\"row\" class=\"row-header\">Experimental</th>\n\n<td class=\"content-container\">false</td>\n</tr>\n\n\n<tr>\n\n<th scope=\"row\" class=\"row-header\">Description</th>\n\n<td class=\"content-container\">CMS72FHIRSTKAntithromboticDay2</td>\n</tr>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<tr>\n\n<th scope=\"row\" class=\"row-header\">Library Steward</th>\n\n<td class=\"content-container\">The Joint Commission</td>\n</tr>\n\n\n\n\n\n\n\n\n<tr>\n  \n  \n  \n  \n  \n<th scope=\"row\" class=\"row-header\">Dependency</th>\n\n  \n  <td class=\"content-container\">\n    \n    <em>Description</em>: Library SDE\n    \n    <br/>\n    \n    \n    \n    \n    \n    \n    <em>Resource</em>: https://madie.cms.gov/Library/SupplementalDataElements|5.1.000\n    <br/>\n    <em>Canonical URL</em>: <tt>https://madie.cms.gov/Library/SupplementalDataElements|5.1.000</tt>\n    \n  </td>\n</tr>\n\n<tr>\n  \n  \n  \n  \n  \n<th scope=\"row\" class=\"row-header\">Dependency</th>\n\n  \n  <td class=\"content-container\">\n    \n    <em>Description</em>: Library TJC\n    \n    <br/>\n    \n    \n    \n    \n    \n    \n    <em>Resource</em>: https://madie.cms.gov/Library/TJCOverall|8.24.000\n    <br/>\n    <em>Canonical URL</em>: <tt>https://madie.cms.gov/Library/TJCOverall|8.24.000</tt>\n    \n  </td>\n</tr>\n\n<tr>\n  \n  \n  \n  \n  \n<th scope=\"row\" class=\"row-header\">Dependency</th>\n\n  \n  <td class=\"content-container\">\n    \n    <em>Description</em>: Library FHIRHelpers\n    \n    <br/>\n    \n    \n    \n    \n    \n    \n    <em>Resource</em>: https://madie.cms.gov/Library/FHIRHelpers|4.4.000\n    <br/>\n    <em>Canonical URL</em>: <tt>https://madie.cms.gov/Library/FHIRHelpers|4.4.000</tt>\n    \n  </td>\n</tr>\n\n<tr>\n  \n  \n  \n  \n  \n<th scope=\"row\" class=\"row-header\">Dependency</th>\n\n  \n  <td class=\"content-container\">\n    \n    <em>Description</em>: Library CQMCommon\n    \n    <br/>\n    \n    \n    \n    \n    \n    \n    <em>Resource</em>: https://madie.cms.gov/Library/CQMCommon|4.1.000\n    <br/>\n    <em>Canonical URL</em>: <tt>https://madie.cms.gov/Library/CQMCommon|4.1.000</tt>\n    \n  </td>\n</tr>\n\n<tr>\n  \n  \n  \n  \n  \n<th scope=\"row\" class=\"row-header\">Dependency</th>\n\n  \n  <td class=\"content-container\">\n    \n    <em>Description</em>: Code system TaskCode\n    \n    <br/>\n    \n    \n    \n    \n    \n    \n    <em>Resource</em>: http://hl7.org/fhir/CodeSystem/task-code\n    <br/>\n    <em>Canonical URL</em>: <tt>http://hl7.org/fhir/CodeSystem/task-code</tt>\n    \n  </td>\n</tr>\n\n<tr>\n  \n  \n  \n  \n  \n<th scope=\"row\" class=\"row-header\">Dependency</th>\n\n  \n  <td class=\"content-container\">\n    \n    <em>Description</em>: Value set Antithrombotic Therapy for Ischemic Stroke\n    \n    <br/>\n    \n    \n    \n    \n    \n    \n    <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1110.62\n    <br/>\n    <em>Canonical URL</em>: <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1110.62</tt>\n    \n  </td>\n</tr>\n\n<tr>\n  \n  \n  \n  \n  \n<th scope=\"row\" class=\"row-header\">Dependency</th>\n\n  \n  <td class=\"content-container\">\n    \n    <em>Description</em>: Value set Thrombolytic tPA Therapy\n    \n    <br/>\n    \n    \n    \n    \n    \n    \n    <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.226\n    <br/>\n    <em>Canonical URL</em>: <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.226</tt>\n    \n  </td>\n</tr>\n\n<tr>\n  \n  \n  \n  \n  \n<th scope=\"row\" class=\"row-header\">Dependency</th>\n\n  \n  <td class=\"content-container\">\n    \n    <em>Description</em>: Value set Intravenous or Intraarterial Thrombolytic tPA Therapy\n    \n    <br/>\n    \n    \n    \n    \n    \n    \n    <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.21\n    <br/>\n    <em>Canonical URL</em>: <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.21</tt>\n    \n  </td>\n</tr>\n\n<tr>\n  \n  \n  \n  \n  \n<th scope=\"row\" class=\"row-header\">Dependency</th>\n\n  \n  <td class=\"content-container\">\n    \n    <em>Description</em>: Value set Intravenous or Intraarterial Thrombolytic tPA Therapy Prior to Arrival\n    \n    <br/>\n    \n    \n    \n    \n    \n    \n    <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1110.21\n    <br/>\n    <em>Canonical URL</em>: <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1110.21</tt>\n    \n  </td>\n</tr>\n\n<tr>\n  \n  \n  \n  \n  \n<th scope=\"row\" class=\"row-header\">Dependency</th>\n\n  \n  <td class=\"content-container\">\n    \n    <em>Description</em>: Value set Medical Reason for Not Providing Treatment\n    \n    <br/>\n    \n    \n    \n    \n    \n    \n    <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.473\n    <br/>\n    <em>Canonical URL</em>: <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.473</tt>\n    \n  </td>\n</tr>\n\n<tr>\n  \n  \n  \n  \n  \n<th scope=\"row\" class=\"row-header\">Dependency</th>\n\n  \n  <td class=\"content-container\">\n    \n    <em>Description</em>: Value set Patient Refusal\n    \n    <br/>\n    \n    \n    \n    \n    \n    \n    <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.93\n    <br/>\n    <em>Canonical URL</em>: <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.93</tt>\n    \n  </td>\n</tr>\n\n<tr>\n  \n  \n  \n  \n  \n<th scope=\"row\" class=\"row-header\">Dependency</th>\n\n  \n  <td class=\"content-container\">\n    \n    <em>Description</em>: Value set Pharmacological Contraindications For Antithrombotic Therapy\n    \n    <br/>\n    \n    \n    \n    \n    \n    \n    <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1110.52\n    <br/>\n    <em>Canonical URL</em>: <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1110.52</tt>\n    \n  </td>\n</tr>\n\n<tr>\n  \n  \n  \n  \n  \n<th scope=\"row\" class=\"row-header\">Dependency</th>\n\n  \n  <td class=\"content-container\">\n    \n    <em>Description</em>: Value set INR\n    \n    <br/>\n    \n    \n    \n    \n    \n    \n    <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.213\n    <br/>\n    <em>Canonical URL</em>: <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.213</tt>\n    \n  </td>\n</tr>\n\n\n\n\n\n\n\n\n\n\n<tr>\n\n<th colspan=\"2\" scope=\"row\" class=\"row-header\">Library Metadata</th>\n\n</tr>\n\n<tr>\n\n<th scope=\"row\" class=\"row-header\">Identifier</th>\n\n<td class=\"content-container\">org.hl7.fhir.r5.model.Identifier@6b457971</td>\n</tr>\n\n\n<tr>\n\n<th scope=\"row\" class=\"row-header\">Version Number</th>\n\n<td class=\"content-container\">0.7.002</td>\n</tr>\n\n\n<tr>\n\n<th scope=\"row\" class=\"row-header\">Library Type</th>\n\n<td class=\"content-container\">[http://terminology.hl7.org/CodeSystem/library-type#logic-library]</td>\n</tr>\n\n\n\n\n<tr>\n  <th scope=\"row\" class=\"row-header\">Data Requirement</th>\n  <td class=\"content-container\">\n    <em>Type</em>: MedicationAdministration\n    <br/>\n  \n    <em>Profile(s)</em>: \n  \n    http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationadministration\n    <br/>        \n  \n   \n   \n    <em>Must Support Elements</em>: medication, status, status.value, id, id.value, effective\n    <br/>\n   \n  \n    <em>Code Filter(s)</em>: \n    <br/>\n  \n  \n    <span class=\"tab-one\"><em>Path</em>: medication</span>\n    <br/>\n  \n  \n  \n    <span class=\"tab-one\"><em>ValueSet</em>:</span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.226\n    <br/> \n  \n  \n  \n   \n  </td>\n</tr>\n\n<tr>\n  <th scope=\"row\" class=\"row-header\">Data Requirement</th>\n  <td class=\"content-container\">\n    <em>Type</em>: Procedure\n    <br/>\n  \n    <em>Profile(s)</em>: \n  \n    http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure\n    <br/>        \n  \n   \n   \n    <em>Must Support Elements</em>: code, status, status.value, id, id.value, performed\n    <br/>\n   \n  \n    <em>Code Filter(s)</em>: \n    <br/>\n  \n  \n    <span class=\"tab-one\"><em>Path</em>: code</span>\n    <br/>\n  \n  \n  \n    <span class=\"tab-one\"><em>ValueSet</em>:</span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.21\n    <br/> \n  \n  \n  \n   \n  </td>\n</tr>\n\n<tr>\n  <th scope=\"row\" class=\"row-header\">Data Requirement</th>\n  <td class=\"content-container\">\n    <em>Type</em>: Condition\n    <br/>\n  \n    <em>Profile(s)</em>: \n  \n    http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition-problems-health-concerns\n    <br/>        \n  \n   \n   \n    <em>Must Support Elements</em>: code, recordedDate, recordedDate.value, verificationStatus\n    <br/>\n   \n  \n    <em>Code Filter(s)</em>: \n    <br/>\n  \n  \n    <span class=\"tab-one\"><em>Path</em>: code</span>\n    <br/>\n  \n  \n  \n    <span class=\"tab-one\"><em>ValueSet</em>:</span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1110.21\n    <br/> \n  \n  \n  \n   \n  </td>\n</tr>\n\n<tr>\n  <th scope=\"row\" class=\"row-header\">Data Requirement</th>\n  <td class=\"content-container\">\n    <em>Type</em>: MedicationRequest\n    <br/>\n  \n    <em>Profile(s)</em>: \n  \n    http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationnotrequested\n    <br/>        \n  \n   \n   \n    <em>Must Support Elements</em>: medication, reasonCode, status, status.value, intent, intent.value, id, id.value, authoredOn, authoredOn.value\n    <br/>\n   \n  \n    <em>Code Filter(s)</em>: \n    <br/>\n  \n  \n    <span class=\"tab-one\"><em>Path</em>: medication</span>\n    <br/>\n  \n  \n  \n    <span class=\"tab-one\"><em>ValueSet</em>:</span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1110.62\n    <br/> \n  \n  \n  \n   \n  </td>\n</tr>\n\n<tr>\n  <th scope=\"row\" class=\"row-header\">Data Requirement</th>\n  <td class=\"content-container\">\n    <em>Type</em>: MedicationRequest\n    <br/>\n  \n    <em>Profile(s)</em>: \n  \n    http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest\n    <br/>        \n  \n   \n   \n    <em>Must Support Elements</em>: medication, status, status.value, id, id.value, authoredOn, authoredOn.value\n    <br/>\n   \n  \n    <em>Code Filter(s)</em>: \n    <br/>\n  \n  \n    <span class=\"tab-one\"><em>Path</em>: medication</span>\n    <br/>\n  \n  \n  \n    <span class=\"tab-one\"><em>ValueSet</em>:</span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1110.62\n    <br/> \n  \n  \n  \n   \n  </td>\n</tr>\n\n<tr>\n  <th scope=\"row\" class=\"row-header\">Data Requirement</th>\n  <td class=\"content-container\">\n    <em>Type</em>: MedicationRequest\n    <br/>\n  \n    <em>Profile(s)</em>: \n  \n    http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest\n    <br/>        \n  \n   \n   \n    <em>Must Support Elements</em>: medication.reference.value, status, status.value, id, id.value, authoredOn, authoredOn.value\n    <br/>\n   \n   \n  </td>\n</tr>\n\n<tr>\n  <th scope=\"row\" class=\"row-header\">Data Requirement</th>\n  <td class=\"content-container\">\n    <em>Type</em>: Medication\n    <br/>\n  \n    <em>Profile(s)</em>: \n  \n    http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medication\n    <br/>        \n  \n   \n   \n    <em>Must Support Elements</em>: id.value, code\n    <br/>\n   \n   \n  </td>\n</tr>\n\n<tr>\n  <th scope=\"row\" class=\"row-header\">Data Requirement</th>\n  <td class=\"content-container\">\n    <em>Type</em>: Task\n    <br/>\n  \n    <em>Profile(s)</em>: \n  \n    http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-taskrejected\n    <br/>        \n  \n   \n   \n    <em>Must Support Elements</em>: focus, statusReason, code\n    <br/>\n   \n   \n  </td>\n</tr>\n\n<tr>\n  <th scope=\"row\" class=\"row-header\">Data Requirement</th>\n  <td class=\"content-container\">\n    <em>Type</em>: MedicationAdministration\n    <br/>\n  \n    <em>Profile(s)</em>: \n  \n    http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationadministrationnotdone\n    <br/>        \n  \n   \n   \n    <em>Must Support Elements</em>: medication, statusReason, id, id.value, extension\n    <br/>\n   \n  \n    <em>Code Filter(s)</em>: \n    <br/>\n  \n  \n    <span class=\"tab-one\"><em>Path</em>: medication</span>\n    <br/>\n  \n  \n  \n    <span class=\"tab-one\"><em>ValueSet</em>:</span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1110.62\n    <br/> \n  \n  \n  \n   \n  </td>\n</tr>\n\n\n\n  <tr>\n\n<th colspan=\"2\" scope=\"row\" class=\"row-header\">Library Content</th>\n\n</tr>\n  \n    \n    <tr>\n      <th scope=\"row\" class=\"row-header\">CQL Content</th>\n      <td>\n        <pre style=\"border: none;\" class=\"content-container highlight language-cql\"><code class=\"language-cql\">library CMS72FHIRSTKAntithromboticDay2 version '0.7.002'\r\n\r\nusing QICore version '6.0.0'\r\n\r\ninclude CQMCommon version '4.1.000' called CQMCommon\r\ninclude QICoreCommon version '4.0.000' called QICoreCommon\r\ninclude FHIRHelpers version '4.4.000' called FHIRHelpers\r\ninclude SupplementalDataElements version '5.1.000' called SDE\r\ninclude TJCOverall version '8.24.000' called TJC\r\n\r\ncodesystem &quot;TaskCode&quot;: 'http://hl7.org/fhir/CodeSystem/task-code'\r\n\r\ncode &quot;fulfill&quot;: 'fulfill' from &quot;TaskCode&quot;\r\n\r\nvalueset &quot;Antithrombotic Therapy for Ischemic Stroke&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1110.62'\r\nvalueset &quot;INR&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.213'\r\nvalueset &quot;Intravenous or Intraarterial Thrombolytic tPA Therapy Prior to Arrival&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1110.21'\r\nvalueset &quot;Intravenous or Intraarterial Thrombolytic tPA Therapy&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.21'\r\nvalueset &quot;Medical Reason for Not Providing Treatment&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.473'\r\nvalueset &quot;Patient Refusal&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.93'\r\nvalueset &quot;Pharmacological Contraindications For Antithrombotic Therapy&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1110.52'\r\nvalueset &quot;Thrombolytic tPA Therapy&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.226'\r\n\r\nparameter &quot;Measurement Period&quot; Interval&lt;DateTime&gt;\r\n\r\ncontext Patient\r\n\r\ndefine &quot;Initial Population&quot;:\r\n  TJC.&quot;Ischemic Stroke Encounter&quot;\r\n\r\ndefine &quot;Denominator&quot;:\r\n  &quot;Initial Population&quot;\r\n\r\ndefine &quot;Denominator Exclusions&quot;:\r\n  &quot;Encounter Less Than Two Days&quot;\r\n    union &quot;Encounter With Comfort Measures During Day Of Or Day After Arrival&quot;\r\n    union &quot;Encounter With Thrombolytic Therapy Given Prior To Arrival Or During Hospitalization&quot;\r\n\r\ndefine &quot;Encounter Less Than Two Days&quot;:\r\n  TJC.&quot;Ischemic Stroke Encounter&quot; IschemicStrokeEncounter\r\n    where IschemicStrokeEncounter.hospitalizationWithObservation ( ).lengthInDays ( ) &lt; 2\r\n\r\ndefine &quot;Encounter With Comfort Measures During Day Of Or Day After Arrival&quot;:\r\n  TJC.&quot;Ischemic Stroke Encounter&quot; IschemicStrokeEncounter\r\n    with TJC.&quot;Intervention Comfort Measures&quot; ComfortMeasure\r\n      such that Coalesce(start of ComfortMeasure.performed.toInterval(), ComfortMeasure.authoredOn) during day of ( start of IschemicStrokeEncounter.hospitalizationWithObservation ( ) ).CalendarDayOfOrDayAfter ( )\r\n\r\ndefine &quot;Encounter With Thrombolytic Therapy Given Prior To Arrival Or During Hospitalization&quot;:\r\n  &quot;Encounter With Thrombolytic Therapy Medication Or Procedures&quot;\r\n    union &quot;Encounter With Thrombolytic Therapy Prior To Arrival&quot;\r\n    union &quot;Encounter With Thrombolytic Therapy Documented As Already Given&quot;\r\n\r\ndefine &quot;Encounter With Thrombolytic Therapy Medication Or Procedures&quot;:\r\n  TJC.&quot;Ischemic Stroke Encounter&quot; IschemicStrokeEncounter\r\n    with &quot;Thrombolytic Therapy Medication Or Procedures&quot; ThrombolyticTherapy\r\n      such that ThrombolyticTherapy.effective.toInterval ( ) starts during Interval[start of IschemicStrokeEncounter.hospitalizationWithObservation ( ) - 24 hours, end of IschemicStrokeEncounter.hospitalizationWithObservation ( ) )\r\n\r\ndefine &quot;Thrombolytic Therapy Medication Or Procedures&quot;:\r\n  ( [&quot;MedicationAdministration&quot;: medication in &quot;Thrombolytic tPA Therapy&quot;] ThrombolyticMedication\r\n      where ThrombolyticMedication.status in { 'in-progress', 'completed' }\r\n      return {\r\n        id: ThrombolyticMedication.id,\r\n        effective: ThrombolyticMedication.effective\r\n      }\r\n  )\r\n    union ( [&quot;Procedure&quot;: &quot;Intravenous or Intraarterial Thrombolytic tPA Therapy&quot;] ThrombolyticProcedure\r\n        where ThrombolyticProcedure.status = 'completed'\r\n        return {\r\n          id: ThrombolyticProcedure.id,\r\n          effective: ThrombolyticProcedure.performed\r\n        }\r\n    )\r\n\r\ndefine &quot;Encounter With Thrombolytic Therapy Prior To Arrival&quot;:\r\n  TJC.&quot;Ischemic Stroke Encounter&quot; IschemicStrokeEncounter\r\n    where exists ( ( IschemicStrokeEncounter.encounterDiagnosis ( ) ) EncounterDiagnosis\r\n        where EncounterDiagnosis.code in &quot;Intravenous or Intraarterial Thrombolytic tPA Therapy Prior to Arrival&quot;\r\n    )\r\n\r\ndefine &quot;Encounter With Thrombolytic Therapy Documented As Already Given&quot;:\r\n  ( TJC.&quot;Ischemic Stroke Encounter&quot; IschemicStrokeEncounter\r\n      where exists [ConditionProblemsHealthConcerns: &quot;Intravenous or Intraarterial Thrombolytic tPA Therapy Prior to Arrival&quot;] PriorTPA\r\n        where PriorTPA.recordedDate during IschemicStrokeEncounter.hospitalizationWithObservation ( )\r\n          and PriorTPA.verificationStatus is not null implies ( PriorTPA.verificationStatus !~ QICoreCommon.&quot;refuted&quot;\r\n            and PriorTPA.verificationStatus !~ QICoreCommon.&quot;entered-in-error&quot;\r\n        )\r\n  )\r\n    union TJC.&quot;Ischemic Stroke Encounter&quot; IschemicStrokeEncounter\r\n      where exists ( ( IschemicStrokeEncounter.encounterDiagnosis ( ) ) EncounterDiagnosis\r\n          where EncounterDiagnosis.code in &quot;Intravenous or Intraarterial Thrombolytic tPA Therapy Prior to Arrival&quot;\r\n      )\r\n\r\ndefine &quot;Numerator&quot;:\r\n  &quot;Encounter With Antithrombotic Therapy&quot;\r\n\r\ndefine &quot;Encounter With Antithrombotic Therapy&quot;:\r\n  TJC.&quot;Ischemic Stroke Encounter&quot; IschemicStrokeEncounter\r\n    with [&quot;MedicationAdministration&quot;: medication in &quot;Antithrombotic Therapy for Ischemic Stroke&quot;] Antithrombotic\r\n      such that Antithrombotic.status in { 'in-progress', 'completed' }\r\n        and Antithrombotic.effective.toInterval ( ) starts during day of ( start of IschemicStrokeEncounter.hospitalizationWithObservation ( ) ).CalendarDayOfOrDayAfter ( )\r\n\r\ndefine &quot;Denominator Exceptions&quot;:\r\n  &quot;Encounter With Documented Reason For No Antithrombotic Ordered Or Administered Day Of Or Day After Hospital Arrival&quot;\r\n    union &quot;Encounter With Pharmacological Contraindications For Antithrombotic Therapy Given Day Of Or Day After Hospital Arrival&quot;\r\n    union &quot;Encounter With An INR Greater Than 3.5&quot;\r\n\r\ndefine &quot;Encounter With Documented Reason For No Antithrombotic Ordered Or Administered Day Of Or Day After Hospital Arrival&quot;:\r\n  TJC.&quot;Ischemic Stroke Encounter&quot; IschemicStrokeEncounter\r\n    with &quot;Documented Reason For No Antithrombotic Ordered Or Administered&quot; NoAntithrombotic\r\n      such that NoAntithrombotic.authoredOn during day of ( start of IschemicStrokeEncounter.hospitalizationWithObservation ( ) ).CalendarDayOfOrDayAfter ( )\r\n\r\ndefine &quot;Documented Reason For No Antithrombotic Ordered Or Administered&quot;:\r\n  &quot;Reason For Not Ordering Antithrombotic&quot;\r\n    union &quot;Reason For Not Administering Antithrombotic&quot;\r\n\r\ndefine &quot;Reason For Not Administering Antithrombotic&quot;:\r\n  [&quot;MedicationAdministrationNotDone&quot;: medication in &quot;Antithrombotic Therapy for Ischemic Stroke&quot;] MedicationAdm\r\n    where ( MedicationAdm.statusReason in &quot;Medical Reason for Not Providing Treatment&quot;\r\n        or MedicationAdm.statusReason in &quot;Patient Refusal&quot;\r\n    )\r\n    return {\r\n      id: MedicationAdm.id,\r\n      authoredOn: MedicationAdm.recorded\r\n    }\r\n\r\ndefine &quot;Reason For Not Ordering Antithrombotic&quot;:\r\n  ( [&quot;MedicationNotRequested&quot;: medication in &quot;Antithrombotic Therapy for Ischemic Stroke&quot;] NoAntithromboticOrder\r\n      where ( NoAntithromboticOrder.reasonCode in &quot;Medical Reason for Not Providing Treatment&quot;\r\n          or NoAntithromboticOrder.reasonCode in &quot;Patient Refusal&quot;\r\n      )\r\n        and NoAntithromboticOrder.status in { 'active', 'completed' }\r\n        and NoAntithromboticOrder.intent in { 'order', 'original-order', 'reflex-order', 'filler-order', 'instance-order' }\r\n      return {\r\n        id: NoAntithromboticOrder.id,\r\n        authoredOn: NoAntithromboticOrder.authoredOn\r\n      }\r\n  )\r\n    union ( [&quot;MedicationRequest&quot;: &quot;Antithrombotic Therapy for Ischemic Stroke&quot;] MedReqAntithrombotic\r\n        with [&quot;TaskRejected&quot;] TaskReject\r\n          such that TaskReject.focus.references ( MedReqAntithrombotic )\r\n            and ( TaskReject.statusReason in &quot;Medical Reason for Not Providing Treatment&quot;\r\n                or TaskReject.statusReason in &quot;Patient Refusal&quot;\r\n            )\r\n            and ( MedReqAntithrombotic.status in { 'active', 'completed' }\r\n                and TaskReject.code ~ &quot;fulfill&quot;\r\n            )\r\n        return {\r\n          id: MedReqAntithrombotic.id,\r\n          authoredOn: MedReqAntithrombotic.authoredOn\r\n        }\r\n    )\r\n\r\ndefine &quot;Encounter With Pharmacological Contraindications For Antithrombotic Therapy Given Day Of Or Day After Hospital Arrival&quot;:\r\n  TJC.&quot;Ischemic Stroke Encounter&quot; IschemicStrokeEncounter\r\n    with [&quot;MedicationAdministration&quot;: medication in &quot;Pharmacological Contraindications For Antithrombotic Therapy&quot;] PharmacologicalContraindications\r\n      such that PharmacologicalContraindications.status in { 'in-progress', 'completed' }\r\n        and PharmacologicalContraindications.effective.toInterval ( ) starts during day of ( start of IschemicStrokeEncounter.hospitalizationWithObservation ( ) ).CalendarDayOfOrDayAfter ( )\r\n\r\ndefine &quot;Encounter With An INR Greater Than 3.5&quot;:\r\n  TJC.&quot;Ischemic Stroke Encounter&quot; IschemicStrokeEncounter\r\n    with [&quot;LaboratoryResultObservation&quot;: &quot;INR&quot;] INR\r\n      such that INR.value as Quantity &gt; 3.5\r\n        and INR.status in { 'final', 'amended', 'corrected' }\r\n        and INR.issued during day of ( start of IschemicStrokeEncounter.hospitalizationWithObservation ( ) ).CalendarDayOfOrDayAfter ( )\r\n\r\ndefine &quot;SDE Ethnicity&quot;:\r\n  SDE.&quot;SDE Ethnicity&quot;\r\n\r\ndefine &quot;SDE Payer&quot;:\r\n  SDE.&quot;SDE Payer&quot;\r\n\r\ndefine &quot;SDE Race&quot;:\r\n  SDE.&quot;SDE Race&quot;\r\n\r\ndefine &quot;SDE Sex&quot;:\r\n  SDE.&quot;SDE Sex&quot;</code></pre>\n      </td>\n    </tr>\n    \n    \n    \n  \n\n<tr>\n  <th colspan=\"2\" scope=\"row\" class=\"row-header\">Generated using version 0.4.7 of the sample-content-ig Liquid templates</th>\n</tr>\n\n    </tbody>\n  </table>\n</div>"
  },
  "contained": [ {
    "resourceType": "Parameters",
    "id": "options",
    "parameter": [ {
      "name": "translatorVersion",
      "valueString": "3.25.0"
    }, {
      "name": "option",
      "valueString": "EnableAnnotations"
    }, {
      "name": "option",
      "valueString": "EnableLocators"
    }, {
      "name": "option",
      "valueString": "DisableListDemotion"
    }, {
      "name": "option",
      "valueString": "DisableListPromotion"
    }, {
      "name": "format",
      "valueString": "XML"
    }, {
      "name": "format",
      "valueString": "JSON"
    }, {
      "name": "analyzeDataRequirements",
      "valueBoolean": false
    }, {
      "name": "collapseDataRequirements",
      "valueBoolean": false
    }, {
      "name": "compatibilityLevel",
      "valueString": "1.5"
    }, {
      "name": "enableCqlOnly",
      "valueBoolean": false
    }, {
      "name": "errorLevel",
      "valueString": "Info"
    }, {
      "name": "signatureLevel",
      "valueString": "Overloads"
    }, {
      "name": "validateUnits",
      "valueBoolean": true
    }, {
      "name": "verifyOnly",
      "valueBoolean": false
    } ]
  } ],
  "extension": [ {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://hl7.org/fhir/CodeSystem/task-code",
      "code": "fulfill",
      "display": "fulfill"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-cqlOptions",
    "valueReference": {
      "reference": "#options"
    }
  } ],
  "url": "https://madie.cms.gov/Library/CMS72FHIRSTKAntithromboticDay2",
  "identifier": [ {
    "use": "official",
    "system": "https://madie.cms.gov/login",
    "value": "CMS72FHIRSTKAntithromboticDay2"
  } ],
  "version": "0.7.002",
  "name": "CMS72FHIRSTKAntithromboticDay2",
  "title": "CMS72FHIRSTKAntithromboticDay2",
  "status": "active",
  "experimental": false,
  "type": {
    "coding": [ {
      "system": "http://terminology.hl7.org/CodeSystem/library-type",
      "code": "logic-library"
    } ]
  },
  "date": "2025-06-20T21:37:02+00:00",
  "publisher": "The Joint Commission",
  "description": "CMS72FHIRSTKAntithromboticDay2",
  "content": [ {
    "contentType": "text/cql",
    "data": "bGlicmFyeSBDTVM3MkZISVJTVEtBbnRpdGhyb21ib3RpY0RheTIgdmVyc2lvbiAnMC43LjAwMicNCg0KdXNpbmcgUUlDb3JlIHZlcnNpb24gJzYuMC4wJw0KDQppbmNsdWRlIENRTUNvbW1vbiB2ZXJzaW9uICc0LjEuMDAwJyBjYWxsZWQgQ1FNQ29tbW9uDQppbmNsdWRlIFFJQ29yZUNvbW1vbiB2ZXJzaW9uICc0LjAuMDAwJyBjYWxsZWQgUUlDb3JlQ29tbW9uDQppbmNsdWRlIEZISVJIZWxwZXJzIHZlcnNpb24gJzQuNC4wMDAnIGNhbGxlZCBGSElSSGVscGVycw0KaW5jbHVkZSBTdXBwbGVtZW50YWxEYXRhRWxlbWVudHMgdmVyc2lvbiAnNS4xLjAwMCcgY2FsbGVkIFNERQ0KaW5jbHVkZSBUSkNPdmVyYWxsIHZlcnNpb24gJzguMjQuMDAwJyBjYWxsZWQgVEpDDQoNCmNvZGVzeXN0ZW0gIlRhc2tDb2RlIjogJ2h0dHA6Ly9obDcub3JnL2ZoaXIvQ29kZVN5c3RlbS90YXNrLWNvZGUnDQoNCmNvZGUgImZ1bGZpbGwiOiAnZnVsZmlsbCcgZnJvbSAiVGFza0NvZGUiDQoNCnZhbHVlc2V0ICJBbnRpdGhyb21ib3RpYyBUaGVyYXB5IGZvciBJc2NoZW1pYyBTdHJva2UiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMTEwLjYyJw0KdmFsdWVzZXQgIklOUiI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy4xMTcuMS43LjEuMjEzJw0KdmFsdWVzZXQgIkludHJhdmVub3VzIG9yIEludHJhYXJ0ZXJpYWwgVGhyb21ib2x5dGljIHRQQSBUaGVyYXB5IFByaW9yIHRvIEFycml2YWwiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMTEwLjIxJw0KdmFsdWVzZXQgIkludHJhdmVub3VzIG9yIEludHJhYXJ0ZXJpYWwgVGhyb21ib2x5dGljIHRQQSBUaGVyYXB5IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTA0NS4yMScNCnZhbHVlc2V0ICJNZWRpY2FsIFJlYXNvbiBmb3IgTm90IFByb3ZpZGluZyBUcmVhdG1lbnQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuMTE3LjEuNy4xLjQ3MycNCnZhbHVlc2V0ICJQYXRpZW50IFJlZnVzYWwiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuMTE3LjEuNy4xLjkzJw0KdmFsdWVzZXQgIlBoYXJtYWNvbG9naWNhbCBDb250cmFpbmRpY2F0aW9ucyBGb3IgQW50aXRocm9tYm90aWMgVGhlcmFweSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjExMTAuNTInDQp2YWx1ZXNldCAiVGhyb21ib2x5dGljIHRQQSBUaGVyYXB5IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjExNy4xLjcuMS4yMjYnDQoNCnBhcmFtZXRlciAiTWVhc3VyZW1lbnQgUGVyaW9kIiBJbnRlcnZhbDxEYXRlVGltZT4NCg0KY29udGV4dCBQYXRpZW50DQoNCmRlZmluZSAiSW5pdGlhbCBQb3B1bGF0aW9uIjoNCiAgVEpDLiJJc2NoZW1pYyBTdHJva2UgRW5jb3VudGVyIg0KDQpkZWZpbmUgIkRlbm9taW5hdG9yIjoNCiAgIkluaXRpYWwgUG9wdWxhdGlvbiINCg0KZGVmaW5lICJEZW5vbWluYXRvciBFeGNsdXNpb25zIjoNCiAgIkVuY291bnRlciBMZXNzIFRoYW4gVHdvIERheXMiDQogICAgdW5pb24gIkVuY291bnRlciBXaXRoIENvbWZvcnQgTWVhc3VyZXMgRHVyaW5nIERheSBPZiBPciBEYXkgQWZ0ZXIgQXJyaXZhbCINCiAgICB1bmlvbiAiRW5jb3VudGVyIFdpdGggVGhyb21ib2x5dGljIFRoZXJhcHkgR2l2ZW4gUHJpb3IgVG8gQXJyaXZhbCBPciBEdXJpbmcgSG9zcGl0YWxpemF0aW9uIg0KDQpkZWZpbmUgIkVuY291bnRlciBMZXNzIFRoYW4gVHdvIERheXMiOg0KICBUSkMuIklzY2hlbWljIFN0cm9rZSBFbmNvdW50ZXIiIElzY2hlbWljU3Ryb2tlRW5jb3VudGVyDQogICAgd2hlcmUgSXNjaGVtaWNTdHJva2VFbmNvdW50ZXIuaG9zcGl0YWxpemF0aW9uV2l0aE9ic2VydmF0aW9uICggKS5sZW5ndGhJbkRheXMgKCApIDwgMg0KDQpkZWZpbmUgIkVuY291bnRlciBXaXRoIENvbWZvcnQgTWVhc3VyZXMgRHVyaW5nIERheSBPZiBPciBEYXkgQWZ0ZXIgQXJyaXZhbCI6DQogIFRKQy4iSXNjaGVtaWMgU3Ryb2tlIEVuY291bnRlciIgSXNjaGVtaWNTdHJva2VFbmNvdW50ZXINCiAgICB3aXRoIFRKQy4iSW50ZXJ2ZW50aW9uIENvbWZvcnQgTWVhc3VyZXMiIENvbWZvcnRNZWFzdXJlDQogICAgICBzdWNoIHRoYXQgQ29hbGVzY2Uoc3RhcnQgb2YgQ29tZm9ydE1lYXN1cmUucGVyZm9ybWVkLnRvSW50ZXJ2YWwoKSwgQ29tZm9ydE1lYXN1cmUuYXV0aG9yZWRPbikgZHVyaW5nIGRheSBvZiAoIHN0YXJ0IG9mIElzY2hlbWljU3Ryb2tlRW5jb3VudGVyLmhvc3BpdGFsaXphdGlvbldpdGhPYnNlcnZhdGlvbiAoICkgKS5DYWxlbmRhckRheU9mT3JEYXlBZnRlciAoICkNCg0KZGVmaW5lICJFbmNvdW50ZXIgV2l0aCBUaHJvbWJvbHl0aWMgVGhlcmFweSBHaXZlbiBQcmlvciBUbyBBcnJpdmFsIE9yIER1cmluZyBIb3NwaXRhbGl6YXRpb24iOg0KICAiRW5jb3VudGVyIFdpdGggVGhyb21ib2x5dGljIFRoZXJhcHkgTWVkaWNhdGlvbiBPciBQcm9jZWR1cmVzIg0KICAgIHVuaW9uICJFbmNvdW50ZXIgV2l0aCBUaHJvbWJvbHl0aWMgVGhlcmFweSBQcmlvciBUbyBBcnJpdmFsIg0KICAgIHVuaW9uICJFbmNvdW50ZXIgV2l0aCBUaHJvbWJvbHl0aWMgVGhlcmFweSBEb2N1bWVudGVkIEFzIEFscmVhZHkgR2l2ZW4iDQoNCmRlZmluZSAiRW5jb3VudGVyIFdpdGggVGhyb21ib2x5dGljIFRoZXJhcHkgTWVkaWNhdGlvbiBPciBQcm9jZWR1cmVzIjoNCiAgVEpDLiJJc2NoZW1pYyBTdHJva2UgRW5jb3VudGVyIiBJc2NoZW1pY1N0cm9rZUVuY291bnRlcg0KICAgIHdpdGggIlRocm9tYm9seXRpYyBUaGVyYXB5IE1lZGljYXRpb24gT3IgUHJvY2VkdXJlcyIgVGhyb21ib2x5dGljVGhlcmFweQ0KICAgICAgc3VjaCB0aGF0IFRocm9tYm9seXRpY1RoZXJhcHkuZWZmZWN0aXZlLnRvSW50ZXJ2YWwgKCApIHN0YXJ0cyBkdXJpbmcgSW50ZXJ2YWxbc3RhcnQgb2YgSXNjaGVtaWNTdHJva2VFbmNvdW50ZXIuaG9zcGl0YWxpemF0aW9uV2l0aE9ic2VydmF0aW9uICggKSAtIDI0IGhvdXJzLCBlbmQgb2YgSXNjaGVtaWNTdHJva2VFbmNvdW50ZXIuaG9zcGl0YWxpemF0aW9uV2l0aE9ic2VydmF0aW9uICggKSApDQoNCmRlZmluZSAiVGhyb21ib2x5dGljIFRoZXJhcHkgTWVkaWNhdGlvbiBPciBQcm9jZWR1cmVzIjoNCiAgKCBbIk1lZGljYXRpb25BZG1pbmlzdHJhdGlvbiI6IG1lZGljYXRpb24gaW4gIlRocm9tYm9seXRpYyB0UEEgVGhlcmFweSJdIFRocm9tYm9seXRpY01lZGljYXRpb24NCiAgICAgIHdoZXJlIFRocm9tYm9seXRpY01lZGljYXRpb24uc3RhdHVzIGluIHsgJ2luLXByb2dyZXNzJywgJ2NvbXBsZXRlZCcgfQ0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgaWQ6IFRocm9tYm9seXRpY01lZGljYXRpb24uaWQsDQogICAgICAgIGVmZmVjdGl2ZTogVGhyb21ib2x5dGljTWVkaWNhdGlvbi5lZmZlY3RpdmUNCiAgICAgIH0NCiAgKQ0KICAgIHVuaW9uICggWyJQcm9jZWR1cmUiOiAiSW50cmF2ZW5vdXMgb3IgSW50cmFhcnRlcmlhbCBUaHJvbWJvbHl0aWMgdFBBIFRoZXJhcHkiXSBUaHJvbWJvbHl0aWNQcm9jZWR1cmUNCiAgICAgICAgd2hlcmUgVGhyb21ib2x5dGljUHJvY2VkdXJlLnN0YXR1cyA9ICdjb21wbGV0ZWQnDQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgaWQ6IFRocm9tYm9seXRpY1Byb2NlZHVyZS5pZCwNCiAgICAgICAgICBlZmZlY3RpdmU6IFRocm9tYm9seXRpY1Byb2NlZHVyZS5wZXJmb3JtZWQNCiAgICAgICAgfQ0KICAgICkNCg0KZGVmaW5lICJFbmNvdW50ZXIgV2l0aCBUaHJvbWJvbHl0aWMgVGhlcmFweSBQcmlvciBUbyBBcnJpdmFsIjoNCiAgVEpDLiJJc2NoZW1pYyBTdHJva2UgRW5jb3VudGVyIiBJc2NoZW1pY1N0cm9rZUVuY291bnRlcg0KICAgIHdoZXJlIGV4aXN0cyAoICggSXNjaGVtaWNTdHJva2VFbmNvdW50ZXIuZW5jb3VudGVyRGlhZ25vc2lzICggKSApIEVuY291bnRlckRpYWdub3Npcw0KICAgICAgICB3aGVyZSBFbmNvdW50ZXJEaWFnbm9zaXMuY29kZSBpbiAiSW50cmF2ZW5vdXMgb3IgSW50cmFhcnRlcmlhbCBUaHJvbWJvbHl0aWMgdFBBIFRoZXJhcHkgUHJpb3IgdG8gQXJyaXZhbCINCiAgICApDQoNCmRlZmluZSAiRW5jb3VudGVyIFdpdGggVGhyb21ib2x5dGljIFRoZXJhcHkgRG9jdW1lbnRlZCBBcyBBbHJlYWR5IEdpdmVuIjoNCiAgKCBUSkMuIklzY2hlbWljIFN0cm9rZSBFbmNvdW50ZXIiIElzY2hlbWljU3Ryb2tlRW5jb3VudGVyDQogICAgICB3aGVyZSBleGlzdHMgW0NvbmRpdGlvblByb2JsZW1zSGVhbHRoQ29uY2VybnM6ICJJbnRyYXZlbm91cyBvciBJbnRyYWFydGVyaWFsIFRocm9tYm9seXRpYyB0UEEgVGhlcmFweSBQcmlvciB0byBBcnJpdmFsIl0gUHJpb3JUUEENCiAgICAgICAgd2hlcmUgUHJpb3JUUEEucmVjb3JkZWREYXRlIGR1cmluZyBJc2NoZW1pY1N0cm9rZUVuY291bnRlci5ob3NwaXRhbGl6YXRpb25XaXRoT2JzZXJ2YXRpb24gKCApDQogICAgICAgICAgYW5kIFByaW9yVFBBLnZlcmlmaWNhdGlvblN0YXR1cyBpcyBub3QgbnVsbCBpbXBsaWVzICggUHJpb3JUUEEudmVyaWZpY2F0aW9uU3RhdHVzICF+IFFJQ29yZUNvbW1vbi4icmVmdXRlZCINCiAgICAgICAgICAgIGFuZCBQcmlvclRQQS52ZXJpZmljYXRpb25TdGF0dXMgIX4gUUlDb3JlQ29tbW9uLiJlbnRlcmVkLWluLWVycm9yIg0KICAgICAgICApDQogICkNCiAgICB1bmlvbiBUSkMuIklzY2hlbWljIFN0cm9rZSBFbmNvdW50ZXIiIElzY2hlbWljU3Ryb2tlRW5jb3VudGVyDQogICAgICB3aGVyZSBleGlzdHMgKCAoIElzY2hlbWljU3Ryb2tlRW5jb3VudGVyLmVuY291bnRlckRpYWdub3NpcyAoICkgKSBFbmNvdW50ZXJEaWFnbm9zaXMNCiAgICAgICAgICB3aGVyZSBFbmNvdW50ZXJEaWFnbm9zaXMuY29kZSBpbiAiSW50cmF2ZW5vdXMgb3IgSW50cmFhcnRlcmlhbCBUaHJvbWJvbHl0aWMgdFBBIFRoZXJhcHkgUHJpb3IgdG8gQXJyaXZhbCINCiAgICAgICkNCg0KZGVmaW5lICJOdW1lcmF0b3IiOg0KICAiRW5jb3VudGVyIFdpdGggQW50aXRocm9tYm90aWMgVGhlcmFweSINCg0KZGVmaW5lICJFbmNvdW50ZXIgV2l0aCBBbnRpdGhyb21ib3RpYyBUaGVyYXB5IjoNCiAgVEpDLiJJc2NoZW1pYyBTdHJva2UgRW5jb3VudGVyIiBJc2NoZW1pY1N0cm9rZUVuY291bnRlcg0KICAgIHdpdGggWyJNZWRpY2F0aW9uQWRtaW5pc3RyYXRpb24iOiBtZWRpY2F0aW9uIGluICJBbnRpdGhyb21ib3RpYyBUaGVyYXB5IGZvciBJc2NoZW1pYyBTdHJva2UiXSBBbnRpdGhyb21ib3RpYw0KICAgICAgc3VjaCB0aGF0IEFudGl0aHJvbWJvdGljLnN0YXR1cyBpbiB7ICdpbi1wcm9ncmVzcycsICdjb21wbGV0ZWQnIH0NCiAgICAgICAgYW5kIEFudGl0aHJvbWJvdGljLmVmZmVjdGl2ZS50b0ludGVydmFsICggKSBzdGFydHMgZHVyaW5nIGRheSBvZiAoIHN0YXJ0IG9mIElzY2hlbWljU3Ryb2tlRW5jb3VudGVyLmhvc3BpdGFsaXphdGlvbldpdGhPYnNlcnZhdGlvbiAoICkgKS5DYWxlbmRhckRheU9mT3JEYXlBZnRlciAoICkNCg0KZGVmaW5lICJEZW5vbWluYXRvciBFeGNlcHRpb25zIjoNCiAgIkVuY291bnRlciBXaXRoIERvY3VtZW50ZWQgUmVhc29uIEZvciBObyBBbnRpdGhyb21ib3RpYyBPcmRlcmVkIE9yIEFkbWluaXN0ZXJlZCBEYXkgT2YgT3IgRGF5IEFmdGVyIEhvc3BpdGFsIEFycml2YWwiDQogICAgdW5pb24gIkVuY291bnRlciBXaXRoIFBoYXJtYWNvbG9naWNhbCBDb250cmFpbmRpY2F0aW9ucyBGb3IgQW50aXRocm9tYm90aWMgVGhlcmFweSBHaXZlbiBEYXkgT2YgT3IgRGF5IEFmdGVyIEhvc3BpdGFsIEFycml2YWwiDQogICAgdW5pb24gIkVuY291bnRlciBXaXRoIEFuIElOUiBHcmVhdGVyIFRoYW4gMy41Ig0KDQpkZWZpbmUgIkVuY291bnRlciBXaXRoIERvY3VtZW50ZWQgUmVhc29uIEZvciBObyBBbnRpdGhyb21ib3RpYyBPcmRlcmVkIE9yIEFkbWluaXN0ZXJlZCBEYXkgT2YgT3IgRGF5IEFmdGVyIEhvc3BpdGFsIEFycml2YWwiOg0KICBUSkMuIklzY2hlbWljIFN0cm9rZSBFbmNvdW50ZXIiIElzY2hlbWljU3Ryb2tlRW5jb3VudGVyDQogICAgd2l0aCAiRG9jdW1lbnRlZCBSZWFzb24gRm9yIE5vIEFudGl0aHJvbWJvdGljIE9yZGVyZWQgT3IgQWRtaW5pc3RlcmVkIiBOb0FudGl0aHJvbWJvdGljDQogICAgICBzdWNoIHRoYXQgTm9BbnRpdGhyb21ib3RpYy5hdXRob3JlZE9uIGR1cmluZyBkYXkgb2YgKCBzdGFydCBvZiBJc2NoZW1pY1N0cm9rZUVuY291bnRlci5ob3NwaXRhbGl6YXRpb25XaXRoT2JzZXJ2YXRpb24gKCApICkuQ2FsZW5kYXJEYXlPZk9yRGF5QWZ0ZXIgKCApDQoNCmRlZmluZSAiRG9jdW1lbnRlZCBSZWFzb24gRm9yIE5vIEFudGl0aHJvbWJvdGljIE9yZGVyZWQgT3IgQWRtaW5pc3RlcmVkIjoNCiAgIlJlYXNvbiBGb3IgTm90IE9yZGVyaW5nIEFudGl0aHJvbWJvdGljIg0KICAgIHVuaW9uICJSZWFzb24gRm9yIE5vdCBBZG1pbmlzdGVyaW5nIEFudGl0aHJvbWJvdGljIg0KDQpkZWZpbmUgIlJlYXNvbiBGb3IgTm90IEFkbWluaXN0ZXJpbmcgQW50aXRocm9tYm90aWMiOg0KICBbIk1lZGljYXRpb25BZG1pbmlzdHJhdGlvbk5vdERvbmUiOiBtZWRpY2F0aW9uIGluICJBbnRpdGhyb21ib3RpYyBUaGVyYXB5IGZvciBJc2NoZW1pYyBTdHJva2UiXSBNZWRpY2F0aW9uQWRtDQogICAgd2hlcmUgKCBNZWRpY2F0aW9uQWRtLnN0YXR1c1JlYXNvbiBpbiAiTWVkaWNhbCBSZWFzb24gZm9yIE5vdCBQcm92aWRpbmcgVHJlYXRtZW50Ig0KICAgICAgICBvciBNZWRpY2F0aW9uQWRtLnN0YXR1c1JlYXNvbiBpbiAiUGF0aWVudCBSZWZ1c2FsIg0KICAgICkNCiAgICByZXR1cm4gew0KICAgICAgaWQ6IE1lZGljYXRpb25BZG0uaWQsDQogICAgICBhdXRob3JlZE9uOiBNZWRpY2F0aW9uQWRtLnJlY29yZGVkDQogICAgfQ0KDQpkZWZpbmUgIlJlYXNvbiBGb3IgTm90IE9yZGVyaW5nIEFudGl0aHJvbWJvdGljIjoNCiAgKCBbIk1lZGljYXRpb25Ob3RSZXF1ZXN0ZWQiOiBtZWRpY2F0aW9uIGluICJBbnRpdGhyb21ib3RpYyBUaGVyYXB5IGZvciBJc2NoZW1pYyBTdHJva2UiXSBOb0FudGl0aHJvbWJvdGljT3JkZXINCiAgICAgIHdoZXJlICggTm9BbnRpdGhyb21ib3RpY09yZGVyLnJlYXNvbkNvZGUgaW4gIk1lZGljYWwgUmVhc29uIGZvciBOb3QgUHJvdmlkaW5nIFRyZWF0bWVudCINCiAgICAgICAgICBvciBOb0FudGl0aHJvbWJvdGljT3JkZXIucmVhc29uQ29kZSBpbiAiUGF0aWVudCBSZWZ1c2FsIg0KICAgICAgKQ0KICAgICAgICBhbmQgTm9BbnRpdGhyb21ib3RpY09yZGVyLnN0YXR1cyBpbiB7ICdhY3RpdmUnLCAnY29tcGxldGVkJyB9DQogICAgICAgIGFuZCBOb0FudGl0aHJvbWJvdGljT3JkZXIuaW50ZW50IGluIHsgJ29yZGVyJywgJ29yaWdpbmFsLW9yZGVyJywgJ3JlZmxleC1vcmRlcicsICdmaWxsZXItb3JkZXInLCAnaW5zdGFuY2Utb3JkZXInIH0NCiAgICAgIHJldHVybiB7DQogICAgICAgIGlkOiBOb0FudGl0aHJvbWJvdGljT3JkZXIuaWQsDQogICAgICAgIGF1dGhvcmVkT246IE5vQW50aXRocm9tYm90aWNPcmRlci5hdXRob3JlZE9uDQogICAgICB9DQogICkNCiAgICB1bmlvbiAoIFsiTWVkaWNhdGlvblJlcXVlc3QiOiAiQW50aXRocm9tYm90aWMgVGhlcmFweSBmb3IgSXNjaGVtaWMgU3Ryb2tlIl0gTWVkUmVxQW50aXRocm9tYm90aWMNCiAgICAgICAgd2l0aCBbIlRhc2tSZWplY3RlZCJdIFRhc2tSZWplY3QNCiAgICAgICAgICBzdWNoIHRoYXQgVGFza1JlamVjdC5mb2N1cy5yZWZlcmVuY2VzICggTWVkUmVxQW50aXRocm9tYm90aWMgKQ0KICAgICAgICAgICAgYW5kICggVGFza1JlamVjdC5zdGF0dXNSZWFzb24gaW4gIk1lZGljYWwgUmVhc29uIGZvciBOb3QgUHJvdmlkaW5nIFRyZWF0bWVudCINCiAgICAgICAgICAgICAgICBvciBUYXNrUmVqZWN0LnN0YXR1c1JlYXNvbiBpbiAiUGF0aWVudCBSZWZ1c2FsIg0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgYW5kICggTWVkUmVxQW50aXRocm9tYm90aWMuc3RhdHVzIGluIHsgJ2FjdGl2ZScsICdjb21wbGV0ZWQnIH0NCiAgICAgICAgICAgICAgICBhbmQgVGFza1JlamVjdC5jb2RlIH4gImZ1bGZpbGwiDQogICAgICAgICAgICApDQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgaWQ6IE1lZFJlcUFudGl0aHJvbWJvdGljLmlkLA0KICAgICAgICAgIGF1dGhvcmVkT246IE1lZFJlcUFudGl0aHJvbWJvdGljLmF1dGhvcmVkT24NCiAgICAgICAgfQ0KICAgICkNCg0KZGVmaW5lICJFbmNvdW50ZXIgV2l0aCBQaGFybWFjb2xvZ2ljYWwgQ29udHJhaW5kaWNhdGlvbnMgRm9yIEFudGl0aHJvbWJvdGljIFRoZXJhcHkgR2l2ZW4gRGF5IE9mIE9yIERheSBBZnRlciBIb3NwaXRhbCBBcnJpdmFsIjoNCiAgVEpDLiJJc2NoZW1pYyBTdHJva2UgRW5jb3VudGVyIiBJc2NoZW1pY1N0cm9rZUVuY291bnRlcg0KICAgIHdpdGggWyJNZWRpY2F0aW9uQWRtaW5pc3RyYXRpb24iOiBtZWRpY2F0aW9uIGluICJQaGFybWFjb2xvZ2ljYWwgQ29udHJhaW5kaWNhdGlvbnMgRm9yIEFudGl0aHJvbWJvdGljIFRoZXJhcHkiXSBQaGFybWFjb2xvZ2ljYWxDb250cmFpbmRpY2F0aW9ucw0KICAgICAgc3VjaCB0aGF0IFBoYXJtYWNvbG9naWNhbENvbnRyYWluZGljYXRpb25zLnN0YXR1cyBpbiB7ICdpbi1wcm9ncmVzcycsICdjb21wbGV0ZWQnIH0NCiAgICAgICAgYW5kIFBoYXJtYWNvbG9naWNhbENvbnRyYWluZGljYXRpb25zLmVmZmVjdGl2ZS50b0ludGVydmFsICggKSBzdGFydHMgZHVyaW5nIGRheSBvZiAoIHN0YXJ0IG9mIElzY2hlbWljU3Ryb2tlRW5jb3VudGVyLmhvc3BpdGFsaXphdGlvbldpdGhPYnNlcnZhdGlvbiAoICkgKS5DYWxlbmRhckRheU9mT3JEYXlBZnRlciAoICkNCg0KZGVmaW5lICJFbmNvdW50ZXIgV2l0aCBBbiBJTlIgR3JlYXRlciBUaGFuIDMuNSI6DQogIFRKQy4iSXNjaGVtaWMgU3Ryb2tlIEVuY291bnRlciIgSXNjaGVtaWNTdHJva2VFbmNvdW50ZXINCiAgICB3aXRoIFsiTGFib3JhdG9yeVJlc3VsdE9ic2VydmF0aW9uIjogIklOUiJdIElOUg0KICAgICAgc3VjaCB0aGF0IElOUi52YWx1ZSBhcyBRdWFudGl0eSA+IDMuNQ0KICAgICAgICBhbmQgSU5SLnN0YXR1cyBpbiB7ICdmaW5hbCcsICdhbWVuZGVkJywgJ2NvcnJlY3RlZCcgfQ0KICAgICAgICBhbmQgSU5SLmlzc3VlZCBkdXJpbmcgZGF5IG9mICggc3RhcnQgb2YgSXNjaGVtaWNTdHJva2VFbmNvdW50ZXIuaG9zcGl0YWxpemF0aW9uV2l0aE9ic2VydmF0aW9uICggKSApLkNhbGVuZGFyRGF5T2ZPckRheUFmdGVyICggKQ0KDQpkZWZpbmUgIlNERSBFdGhuaWNpdHkiOg0KICBTREUuIlNERSBFdGhuaWNpdHkiDQoNCmRlZmluZSAiU0RFIFBheWVyIjoNCiAgU0RFLiJTREUgUGF5ZXIiDQoNCmRlZmluZSAiU0RFIFJhY2UiOg0KICBTREUuIlNERSBSYWNlIg0KDQpkZWZpbmUgIlNERSBTZXgiOg0KICBTREUuIlNERSBTZXgi"
  } ]
}