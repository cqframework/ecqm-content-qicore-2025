{"resourceType":"Bundle","id":"OncologyPainIntensityQuantifiedFHIR-bundle","type":"transaction","entry":[{"resource":{"resourceType":"Library","id":"OncologyPainIntensityQuantifiedFHIR","meta":{"profile":["http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareablelibrary","http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-computablelibrary","http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-publishablelibrary","http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-executablelibrary","http://hl7.org/fhir/uv/cql/StructureDefinition/cql-library","http://hl7.org/fhir/uv/cql/StructureDefinition/elm-json-library","http://hl7.org/fhir/uv/cql/StructureDefinition/elm-xml-library"]},"language":"en","text":{"status":"extensions","div":"<div xmlns=\"http://www.w3.org/1999/xhtml\">\n    <table class=\"grid dict\">\n        \n        \n        <tr>\n            <th scope=\"row\"><b>Title: </b></th>\n            <td style=\"padding-left: 4px;\">OncologyPainIntensityQuantifiedFHIR</td>\n        </tr>\n        \n\n        \n        \n        <tr>\n            <th scope=\"row\"><b>Id: </b></th>\n            <td style=\"padding-left: 4px;\">OncologyPainIntensityQuantifiedFHIR</td>\n        </tr>\n        \n\n        \n        \n        <tr>\n            <th scope=\"row\"><b>Version: </b></th>\n            <td style=\"padding-left: 4px;\">0.3.000</td>\n        </tr>\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Url: </b></th>\n            <td style=\"padding-left: 4px;\">https://madie.cms.gov/Library/OncologyPainIntensityQuantifiedFHIR</td>\n        </tr>\n        \n\n        \n        <tr>\n            <th scope=\"row\">\n                <b>\n                    \n                        official\n                    \n                </b>\n            </th>\n            <td style=\"padding-left: 4px;\">\n                \n                <p style=\"margin-bottom: 5px;\">\n                    <span>OncologyPainIntensityQuantifiedFHIR</span>\n                </p>\n                \n            </td>\n        </tr>\n        \n\n        \n\n        \n\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Type: </b></th>\n            <td style=\"padding-left: 4px;\">\n                \n                    \n                        \n                        <p style=\"margin-bottom: 5px;\">\n                            <b>system: </b> <span>http://terminology.hl7.org/CodeSystem/library-type</span>\n                        </p>\n                        \n                        \n                        <p style=\"margin-bottom: 5px;\">\n                            <b>code: </b> <span>logic-library</span>\n                        </p>\n                        \n                        \n                    \n                \n                \n            </td>\n        </tr>\n        \n\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Date: </b></th>\n            <td style=\"padding-left: 4px;\">2025-04-16T15:15:42+00:00</td>\n        </tr>\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Publisher: </b></th>\n            <td style=\"padding-left: 4px;\">American Society of Clinical Oncology</td>\n        </tr>\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Description: </b></th>\n            <td style=\"padding-left: 4px;\">OncologyPainIntensityQuantifiedFHIR</td>\n        </tr>\n        \n\n        \n\n        \n\n        \n\n        \n\n        \n\n        \n\n        \n\n        \n\n        \n\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Related Artifacts: </b></th>\n            <td style=\"padding-left: 4px;\">\n                \n                \n                \n                <p><b>Dependencies</b></p>\n                <ul>\n                  \n                    <li>https://madie.cms.gov/Library/QICoreCommon|4.0.000</li>\n                  \n                    <li>http://www.ama-assn.org/go/cpt</li>\n                  \n                    <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1026</li>\n                  \n                    <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1010</li>\n                  \n                    <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1001</li>\n                  \n                    <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.1444.5.215</li>\n                  \n                    <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1027</li>\n                  \n                    <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1028</li>\n                  \n                </ul>\n                \n                \n                \n                \n                \n            </td>\n        </tr>\n        \n\n        \n\n        \n        <tr>\n          <th scope=\"row\"><b>Data Requirements:</b></th>\n          <td style=\"padding-left: 4px;\">\n            <table class=\"grid-dict\">\n              <tr><th><b>Type</b></th><th><b>Profile</b></th><th><b>MS</b></th><th><b>Code Filter</b></th></tr>\n              \n                <tr>\n                  <th>Encounter</th>\n                  <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter</th>\n                  <th>;;</th>\n                  <th>\n                    \n                      <b>code filter: </b>\n                      \n                      <br/>\n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>path: </b><span>type</span>\n                      </span>\n                      \n                      <br/>\n                      \n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1001</span>\n                      </span>\n                      \n                      \n                    \n                  </th>\n                </tr>\n              \n                <tr>\n                  <th>Encounter</th>\n                  <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter</th>\n                  <th>;;</th>\n                  <th>\n                    \n                      <b>code filter: </b>\n                      \n                      <br/>\n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>path: </b><span>type</span>\n                      </span>\n                      \n                      <br/>\n                      \n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.1444.5.215</span>\n                      </span>\n                      \n                      \n                    \n                  </th>\n                </tr>\n              \n                <tr>\n                  <th>Observation</th>\n                  <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-screening-assessment</th>\n                  <th>;;;;;</th>\n                  <th>\n                    \n                      <b>code filter: </b>\n                      \n                      <br/>\n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>path: </b><span>code</span>\n                      </span>\n                      \n                      <br/>\n                      \n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1028</span>\n                      </span>\n                      \n                      \n                    \n                  </th>\n                </tr>\n              \n            </table>\n          </td>\n        </tr>\n        \n\n        \n        \n        <tr>\n          <td colspan=\"2\">\n            <table>\n              <tr><th><a id=\"cql-content\"><b>Content: </b></a> text/cql</th></tr>\n              <tr><td><pre><code class=\"language-cql\">library OncologyPainIntensityQuantifiedFHIR version '0.3.000'\r\n\r\nusing QICore version '6.0.0'\r\n\r\ninclude FHIRHelpers version '4.4.000' called FHIRHelpers\r\ninclude CQMCommon version '4.0.000' called CQMCommon\r\ninclude QICoreCommon version '4.0.000' called QICoreCommon\r\ninclude SupplementalDataElements version '5.1.000' called SDE\r\n\r\ncodesystem &quot;CPT&quot;: 'http://www.ama-assn.org/go/cpt'\r\n\r\nvalueset &quot;Audio Visual Telehealth Encounter&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.1444.5.215'\r\nvalueset &quot;Cancer&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1010'\r\nvalueset &quot;Chemotherapy Administration&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1027'\r\nvalueset &quot;Office Visit&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1001'\r\nvalueset &quot;Radiation Treatment Management&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1026'\r\nvalueset &quot;Standardized Pain Assessment Tool&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1028'\r\n\r\ncode &quot;Radiation treatment management, 5 treatments&quot;: '77427' from &quot;CPT&quot; display 'Radiation treatment management, 5 treatments'\r\n\r\nparameter &quot;Measurement Period&quot; Interval&lt;DateTime&gt;\r\n\r\ncontext Patient\r\n\r\ndefine &quot;Denominator 1&quot;:\r\n  &quot;Initial Population 1&quot;\r\n\r\ndefine &quot;Denominator 2&quot;:\r\n  &quot;Initial Population 2&quot;\r\n\r\ndefine &quot;Initial Population 1&quot;:\r\n  &quot;Face to Face or Telehealth Encounter with Ongoing Chemotherapy&quot;\r\n\r\ndefine &quot;Initial Population 2&quot;:\r\n  &quot;Radiation Treatment Management During Measurement Period with Cancer Diagnosis&quot;\r\n\r\ndefine &quot;Chemotherapy Within 31 Days Prior and During Measurement Period&quot;:\r\n  [Procedure: &quot;Chemotherapy Administration&quot;] ChemoAdministration\r\n    where ChemoAdministration.performed.toInterval ( ) during Interval[start of &quot;Measurement Period&quot; - 31 days, end of &quot;Measurement Period&quot;]\r\n      and ChemoAdministration.status = 'completed'\r\n\r\ndefine &quot;Face to Face or Telehealth Encounter with Ongoing Chemotherapy&quot;:\r\n  from\r\n    ( [Encounter: &quot;Office Visit&quot;]\r\n      union [Encounter: &quot;Audio Visual Telehealth Encounter&quot;] ) FaceToFaceOrTelehealthEncounter,\r\n    &quot;Chemotherapy Within 31 Days Prior and During Measurement Period&quot; ChemoBeforeEncounter,\r\n    &quot;Chemotherapy Within 31 Days Prior and During Measurement Period&quot; ChemoAfterEncounter,\r\n    [ConditionProblemsHealthConcerns: &quot;Cancer&quot;] CancerDx\r\n    where CancerDx.prevalenceInterval ( ) overlaps FaceToFaceOrTelehealthEncounter.period\r\n      and ChemoBeforeEncounter.performed.toInterval ( ) starts 30 days or less on or before day of end of FaceToFaceOrTelehealthEncounter.period\r\n      and ChemoAfterEncounter.performed.toInterval ( ) starts 30 days or less on or after day of end of FaceToFaceOrTelehealthEncounter.period\r\n      and not ( ChemoAfterEncounter.performed.toInterval ( ) same day as ChemoBeforeEncounter.performed.toInterval ( ) )\r\n      and FaceToFaceOrTelehealthEncounter.period during &quot;Measurement Period&quot;\r\n      and FaceToFaceOrTelehealthEncounter.status = 'finished'\r\n    return FaceToFaceOrTelehealthEncounter\r\n\r\ndefine &quot;Numerator 1&quot;:\r\n  &quot;Face to Face or Telehealth Encounter with Ongoing Chemotherapy&quot; FaceToFaceOrTelehealthEncounterWithChemo\r\n    with &quot;Standard Pain Assessment with Result&quot; PainAssessed\r\n      such that PainAssessed.effective.toInterval ( ) during FaceToFaceOrTelehealthEncounterWithChemo.period\r\n\r\ndefine &quot;Radiation Treatment Management During Measurement Period with Cancer Diagnosis&quot;:\r\n  ( [Encounter: &quot;Radiation Treatment Management&quot;] ) RadiationTreatmentManagement\r\n    with [ConditionProblemsHealthConcerns: &quot;Cancer&quot;] CancerDx\r\n      such that CancerDx.isActive ( )\r\n        and CancerDx.prevalenceInterval ( ) overlaps RadiationTreatmentManagement.period\r\n    where RadiationTreatmentManagement.period during &quot;Measurement Period&quot;\r\n      and RadiationTreatmentManagement.status = 'finished'\r\n\r\ndefine &quot;Numerator 2&quot;:\r\n  &quot;Radiation Treatment Management During Measurement Period with Cancer Diagnosis&quot; RadiationManagementEncounter\r\n    with &quot;Standard Pain Assessment with Result&quot; PainAssessed\r\n      such that case\r\n        when exists ( ( RadiationManagementEncounter.type ) RadiationManagement\r\n            where RadiationManagement ~ &quot;Radiation treatment management, 5 treatments&quot;\r\n        ) then PainAssessed.effective.toInterval ( ) 6 days or less on or before day of start of RadiationManagementEncounter.period \r\n        else PainAssessed.effective.toInterval ( ) during day of RadiationManagementEncounter.period end\r\n\r\ndefine &quot;SDE Ethnicity&quot;:\r\n  SDE.&quot;SDE Ethnicity&quot;\r\n\r\ndefine &quot;SDE Payer&quot;:\r\n  SDE.&quot;SDE Payer&quot;\r\n\r\ndefine &quot;SDE Race&quot;:\r\n  SDE.&quot;SDE Race&quot;\r\n\r\ndefine &quot;SDE Sex&quot;:\r\n  SDE.&quot;SDE Sex&quot;\r\n\r\ndefine &quot;Standard Pain Assessment with Result&quot;:\r\n  [ObservationScreeningAssessment: &quot;Standardized Pain Assessment Tool&quot;] AssessedPain\r\n    where AssessedPain.value is not null\r\n      and AssessedPain.status = 'final'</code></pre></td></tr>\n            </table>\n          </td>\n        </tr>\n        \n        \n        \n    </table>\n</div>"},"contained":[{"resourceType":"Parameters","id":"options","parameter":[{"name":"translatorVersion","valueString":"3.25.0"},{"name":"option","valueString":"EnableAnnotations"},{"name":"option","valueString":"EnableLocators"},{"name":"option","valueString":"DisableListDemotion"},{"name":"option","valueString":"DisableListPromotion"},{"name":"format","valueString":"XML"},{"name":"format","valueString":"JSON"},{"name":"analyzeDataRequirements","valueBoolean":false},{"name":"collapseDataRequirements","valueBoolean":false},{"name":"compatibilityLevel","valueString":"1.5"},{"name":"enableCqlOnly","valueBoolean":false},{"name":"errorLevel","valueString":"Info"},{"name":"signatureLevel","valueString":"Overloads"},{"name":"validateUnits","valueBoolean":true},{"name":"verifyOnly","valueBoolean":false}]}],"extension":[{"url":"http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode","valueCoding":{"system":"http://www.ama-assn.org/go/cpt","code":"77427","display":"Radiation treatment management, 5 treatments"}},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-cqlOptions","valueReference":{"reference":"#options"}},{"url":"http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-softwaresystem","valueReference":{"reference":"Device/cqf-tooling"}}],"url":"https://madie.cms.gov/Library/OncologyPainIntensityQuantifiedFHIR","identifier":[{"use":"official","system":"https://madie.cms.gov/login","value":"OncologyPainIntensityQuantifiedFHIR"}],"version":"0.3.000","name":"OncologyPainIntensityQuantifiedFHIR","title":"OncologyPainIntensityQuantifiedFHIR","status":"active","experimental":false,"type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/library-type","code":"logic-library"}]},"date":"2025-04-16T15:15:42+00:00","publisher":"American Society of Clinical Oncology","description":"OncologyPainIntensityQuantifiedFHIR","content":[{"contentType":"text/cql","data":"bGlicmFyeSBPbmNvbG9neVBhaW5JbnRlbnNpdHlRdWFudGlmaWVkRkhJUiB2ZXJzaW9uICcwLjMuMDAwJw0KDQp1c2luZyBRSUNvcmUgdmVyc2lvbiAnNi4wLjAnDQoNCmluY2x1ZGUgRkhJUkhlbHBlcnMgdmVyc2lvbiAnNC40LjAwMCcgY2FsbGVkIEZISVJIZWxwZXJzDQppbmNsdWRlIENRTUNvbW1vbiB2ZXJzaW9uICc0LjAuMDAwJyBjYWxsZWQgQ1FNQ29tbW9uDQppbmNsdWRlIFFJQ29yZUNvbW1vbiB2ZXJzaW9uICc0LjAuMDAwJyBjYWxsZWQgUUlDb3JlQ29tbW9uDQppbmNsdWRlIFN1cHBsZW1lbnRhbERhdGFFbGVtZW50cyB2ZXJzaW9uICc1LjEuMDAwJyBjYWxsZWQgU0RFDQoNCmNvZGVzeXN0ZW0gIkNQVCI6ICdodHRwOi8vd3d3LmFtYS1hc3NuLm9yZy9nby9jcHQnDQoNCnZhbHVlc2V0ICJBdWRpbyBWaXN1YWwgVGVsZWhlYWx0aCBFbmNvdW50ZXIiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuMTQ0NC41LjIxNScNCnZhbHVlc2V0ICJDYW5jZXIiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNTI2LjMuMTAxMCcNCnZhbHVlc2V0ICJDaGVtb3RoZXJhcHkgQWRtaW5pc3RyYXRpb24iOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNTI2LjMuMTAyNycNCnZhbHVlc2V0ICJPZmZpY2UgVmlzaXQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNDY0LjEwMDMuMTAxLjEyLjEwMDEnDQp2YWx1ZXNldCAiUmFkaWF0aW9uIFRyZWF0bWVudCBNYW5hZ2VtZW50IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjUyNi4zLjEwMjYnDQp2YWx1ZXNldCAiU3RhbmRhcmRpemVkIFBhaW4gQXNzZXNzbWVudCBUb29sIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjUyNi4zLjEwMjgnDQoNCmNvZGUgIlJhZGlhdGlvbiB0cmVhdG1lbnQgbWFuYWdlbWVudCwgNSB0cmVhdG1lbnRzIjogJzc3NDI3JyBmcm9tICJDUFQiIGRpc3BsYXkgJ1JhZGlhdGlvbiB0cmVhdG1lbnQgbWFuYWdlbWVudCwgNSB0cmVhdG1lbnRzJw0KDQpwYXJhbWV0ZXIgIk1lYXN1cmVtZW50IFBlcmlvZCIgSW50ZXJ2YWw8RGF0ZVRpbWU+DQoNCmNvbnRleHQgUGF0aWVudA0KDQpkZWZpbmUgIkRlbm9taW5hdG9yIDEiOg0KICAiSW5pdGlhbCBQb3B1bGF0aW9uIDEiDQoNCmRlZmluZSAiRGVub21pbmF0b3IgMiI6DQogICJJbml0aWFsIFBvcHVsYXRpb24gMiINCg0KZGVmaW5lICJJbml0aWFsIFBvcHVsYXRpb24gMSI6DQogICJGYWNlIHRvIEZhY2Ugb3IgVGVsZWhlYWx0aCBFbmNvdW50ZXIgd2l0aCBPbmdvaW5nIENoZW1vdGhlcmFweSINCg0KZGVmaW5lICJJbml0aWFsIFBvcHVsYXRpb24gMiI6DQogICJSYWRpYXRpb24gVHJlYXRtZW50IE1hbmFnZW1lbnQgRHVyaW5nIE1lYXN1cmVtZW50IFBlcmlvZCB3aXRoIENhbmNlciBEaWFnbm9zaXMiDQoNCmRlZmluZSAiQ2hlbW90aGVyYXB5IFdpdGhpbiAzMSBEYXlzIFByaW9yIGFuZCBEdXJpbmcgTWVhc3VyZW1lbnQgUGVyaW9kIjoNCiAgW1Byb2NlZHVyZTogIkNoZW1vdGhlcmFweSBBZG1pbmlzdHJhdGlvbiJdIENoZW1vQWRtaW5pc3RyYXRpb24NCiAgICB3aGVyZSBDaGVtb0FkbWluaXN0cmF0aW9uLnBlcmZvcm1lZC50b0ludGVydmFsICggKSBkdXJpbmcgSW50ZXJ2YWxbc3RhcnQgb2YgIk1lYXN1cmVtZW50IFBlcmlvZCIgLSAzMSBkYXlzLCBlbmQgb2YgIk1lYXN1cmVtZW50IFBlcmlvZCJdDQogICAgICBhbmQgQ2hlbW9BZG1pbmlzdHJhdGlvbi5zdGF0dXMgPSAnY29tcGxldGVkJw0KDQpkZWZpbmUgIkZhY2UgdG8gRmFjZSBvciBUZWxlaGVhbHRoIEVuY291bnRlciB3aXRoIE9uZ29pbmcgQ2hlbW90aGVyYXB5IjoNCiAgZnJvbQ0KICAgICggW0VuY291bnRlcjogIk9mZmljZSBWaXNpdCJdDQogICAgICB1bmlvbiBbRW5jb3VudGVyOiAiQXVkaW8gVmlzdWFsIFRlbGVoZWFsdGggRW5jb3VudGVyIl0gKSBGYWNlVG9GYWNlT3JUZWxlaGVhbHRoRW5jb3VudGVyLA0KICAgICJDaGVtb3RoZXJhcHkgV2l0aGluIDMxIERheXMgUHJpb3IgYW5kIER1cmluZyBNZWFzdXJlbWVudCBQZXJpb2QiIENoZW1vQmVmb3JlRW5jb3VudGVyLA0KICAgICJDaGVtb3RoZXJhcHkgV2l0aGluIDMxIERheXMgUHJpb3IgYW5kIER1cmluZyBNZWFzdXJlbWVudCBQZXJpb2QiIENoZW1vQWZ0ZXJFbmNvdW50ZXIsDQogICAgW0NvbmRpdGlvblByb2JsZW1zSGVhbHRoQ29uY2VybnM6ICJDYW5jZXIiXSBDYW5jZXJEeA0KICAgIHdoZXJlIENhbmNlckR4LnByZXZhbGVuY2VJbnRlcnZhbCAoICkgb3ZlcmxhcHMgRmFjZVRvRmFjZU9yVGVsZWhlYWx0aEVuY291bnRlci5wZXJpb2QNCiAgICAgIGFuZCBDaGVtb0JlZm9yZUVuY291bnRlci5wZXJmb3JtZWQudG9JbnRlcnZhbCAoICkgc3RhcnRzIDMwIGRheXMgb3IgbGVzcyBvbiBvciBiZWZvcmUgZGF5IG9mIGVuZCBvZiBGYWNlVG9GYWNlT3JUZWxlaGVhbHRoRW5jb3VudGVyLnBlcmlvZA0KICAgICAgYW5kIENoZW1vQWZ0ZXJFbmNvdW50ZXIucGVyZm9ybWVkLnRvSW50ZXJ2YWwgKCApIHN0YXJ0cyAzMCBkYXlzIG9yIGxlc3Mgb24gb3IgYWZ0ZXIgZGF5IG9mIGVuZCBvZiBGYWNlVG9GYWNlT3JUZWxlaGVhbHRoRW5jb3VudGVyLnBlcmlvZA0KICAgICAgYW5kIG5vdCAoIENoZW1vQWZ0ZXJFbmNvdW50ZXIucGVyZm9ybWVkLnRvSW50ZXJ2YWwgKCApIHNhbWUgZGF5IGFzIENoZW1vQmVmb3JlRW5jb3VudGVyLnBlcmZvcm1lZC50b0ludGVydmFsICggKSApDQogICAgICBhbmQgRmFjZVRvRmFjZU9yVGVsZWhlYWx0aEVuY291bnRlci5wZXJpb2QgZHVyaW5nICJNZWFzdXJlbWVudCBQZXJpb2QiDQogICAgICBhbmQgRmFjZVRvRmFjZU9yVGVsZWhlYWx0aEVuY291bnRlci5zdGF0dXMgPSAnZmluaXNoZWQnDQogICAgcmV0dXJuIEZhY2VUb0ZhY2VPclRlbGVoZWFsdGhFbmNvdW50ZXINCg0KZGVmaW5lICJOdW1lcmF0b3IgMSI6DQogICJGYWNlIHRvIEZhY2Ugb3IgVGVsZWhlYWx0aCBFbmNvdW50ZXIgd2l0aCBPbmdvaW5nIENoZW1vdGhlcmFweSIgRmFjZVRvRmFjZU9yVGVsZWhlYWx0aEVuY291bnRlcldpdGhDaGVtbw0KICAgIHdpdGggIlN0YW5kYXJkIFBhaW4gQXNzZXNzbWVudCB3aXRoIFJlc3VsdCIgUGFpbkFzc2Vzc2VkDQogICAgICBzdWNoIHRoYXQgUGFpbkFzc2Vzc2VkLmVmZmVjdGl2ZS50b0ludGVydmFsICggKSBkdXJpbmcgRmFjZVRvRmFjZU9yVGVsZWhlYWx0aEVuY291bnRlcldpdGhDaGVtby5wZXJpb2QNCg0KZGVmaW5lICJSYWRpYXRpb24gVHJlYXRtZW50IE1hbmFnZW1lbnQgRHVyaW5nIE1lYXN1cmVtZW50IFBlcmlvZCB3aXRoIENhbmNlciBEaWFnbm9zaXMiOg0KICAoIFtFbmNvdW50ZXI6ICJSYWRpYXRpb24gVHJlYXRtZW50IE1hbmFnZW1lbnQiXSApIFJhZGlhdGlvblRyZWF0bWVudE1hbmFnZW1lbnQNCiAgICB3aXRoIFtDb25kaXRpb25Qcm9ibGVtc0hlYWx0aENvbmNlcm5zOiAiQ2FuY2VyIl0gQ2FuY2VyRHgNCiAgICAgIHN1Y2ggdGhhdCBDYW5jZXJEeC5pc0FjdGl2ZSAoICkNCiAgICAgICAgYW5kIENhbmNlckR4LnByZXZhbGVuY2VJbnRlcnZhbCAoICkgb3ZlcmxhcHMgUmFkaWF0aW9uVHJlYXRtZW50TWFuYWdlbWVudC5wZXJpb2QNCiAgICB3aGVyZSBSYWRpYXRpb25UcmVhdG1lbnRNYW5hZ2VtZW50LnBlcmlvZCBkdXJpbmcgIk1lYXN1cmVtZW50IFBlcmlvZCINCiAgICAgIGFuZCBSYWRpYXRpb25UcmVhdG1lbnRNYW5hZ2VtZW50LnN0YXR1cyA9ICdmaW5pc2hlZCcNCg0KZGVmaW5lICJOdW1lcmF0b3IgMiI6DQogICJSYWRpYXRpb24gVHJlYXRtZW50IE1hbmFnZW1lbnQgRHVyaW5nIE1lYXN1cmVtZW50IFBlcmlvZCB3aXRoIENhbmNlciBEaWFnbm9zaXMiIFJhZGlhdGlvbk1hbmFnZW1lbnRFbmNvdW50ZXINCiAgICB3aXRoICJTdGFuZGFyZCBQYWluIEFzc2Vzc21lbnQgd2l0aCBSZXN1bHQiIFBhaW5Bc3Nlc3NlZA0KICAgICAgc3VjaCB0aGF0IGNhc2UNCiAgICAgICAgd2hlbiBleGlzdHMgKCAoIFJhZGlhdGlvbk1hbmFnZW1lbnRFbmNvdW50ZXIudHlwZSApIFJhZGlhdGlvbk1hbmFnZW1lbnQNCiAgICAgICAgICAgIHdoZXJlIFJhZGlhdGlvbk1hbmFnZW1lbnQgfiAiUmFkaWF0aW9uIHRyZWF0bWVudCBtYW5hZ2VtZW50LCA1IHRyZWF0bWVudHMiDQogICAgICAgICkgdGhlbiBQYWluQXNzZXNzZWQuZWZmZWN0aXZlLnRvSW50ZXJ2YWwgKCApIDYgZGF5cyBvciBsZXNzIG9uIG9yIGJlZm9yZSBkYXkgb2Ygc3RhcnQgb2YgUmFkaWF0aW9uTWFuYWdlbWVudEVuY291bnRlci5wZXJpb2QgDQogICAgICAgIGVsc2UgUGFpbkFzc2Vzc2VkLmVmZmVjdGl2ZS50b0ludGVydmFsICggKSBkdXJpbmcgZGF5IG9mIFJhZGlhdGlvbk1hbmFnZW1lbnRFbmNvdW50ZXIucGVyaW9kIGVuZA0KDQpkZWZpbmUgIlNERSBFdGhuaWNpdHkiOg0KICBTREUuIlNERSBFdGhuaWNpdHkiDQoNCmRlZmluZSAiU0RFIFBheWVyIjoNCiAgU0RFLiJTREUgUGF5ZXIiDQoNCmRlZmluZSAiU0RFIFJhY2UiOg0KICBTREUuIlNERSBSYWNlIg0KDQpkZWZpbmUgIlNERSBTZXgiOg0KICBTREUuIlNERSBTZXgiDQoNCmRlZmluZSAiU3RhbmRhcmQgUGFpbiBBc3Nlc3NtZW50IHdpdGggUmVzdWx0IjoNCiAgW09ic2VydmF0aW9uU2NyZWVuaW5nQXNzZXNzbWVudDogIlN0YW5kYXJkaXplZCBQYWluIEFzc2Vzc21lbnQgVG9vbCJdIEFzc2Vzc2VkUGFpbg0KICAgIHdoZXJlIEFzc2Vzc2VkUGFpbi52YWx1ZSBpcyBub3QgbnVsbA0KICAgICAgYW5kIEFzc2Vzc2VkUGFpbi5zdGF0dXMgPSAnZmluYWwn"}]},"request":{"method":"PUT","url":"Library/OncologyPainIntensityQuantifiedFHIR"}},{"resource":{"resourceType":"Measure","id":"OncologyPainIntensityQuantifiedFHIR","meta":{"profile":["http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareablemeasure","http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/computable-measure-cqfm","http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/publishable-measure-cqfm","http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/executable-measure-cqfm","http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cql-measure-cqfm","http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/elm-measure-cqfm","http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/proportion-measure-cqfm"]},"contained":[{"resourceType":"Library","id":"effective-data-requirements","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode","valueCoding":{"system":"http://terminology.hl7.org/CodeSystem/condition-clinical","code":"active","display":"Active"}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode","valueCoding":{"system":"http://terminology.hl7.org/CodeSystem/condition-clinical","code":"recurrence","display":"Recurrence"}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode","valueCoding":{"system":"http://terminology.hl7.org/CodeSystem/condition-clinical","code":"relapse","display":"Relapse"}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode","valueCoding":{"system":"http://www.ama-assn.org/go/cpt","code":"77427","display":"Radiation treatment management, 5 treatments"}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"OncologyPainIntensityQuantifiedFHIR"},{"url":"name","valueString":"Radiation Treatment Management During Measurement Period with Cancer Diagnosis"},{"url":"statement","valueString":"define \"Radiation Treatment Management During Measurement Period with Cancer Diagnosis\":\n  ( [Encounter: \"Radiation Treatment Management\"] ) RadiationTreatmentManagement\n    with [ConditionProblemsHealthConcerns: \"Cancer\"] CancerDx\n      such that CancerDx.isActive ( )\n        and CancerDx.prevalenceInterval ( ) overlaps RadiationTreatmentManagement.period\n    where RadiationTreatmentManagement.period during \"Measurement Period\"\n      and RadiationTreatmentManagement.status = 'finished'"},{"url":"displaySequence","valueInteger":0}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"OncologyPainIntensityQuantifiedFHIR"},{"url":"name","valueString":"Initial Population 2"},{"url":"statement","valueString":"define \"Initial Population 2\":\n  \"Radiation Treatment Management During Measurement Period with Cancer Diagnosis\""},{"url":"displaySequence","valueInteger":1}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"OncologyPainIntensityQuantifiedFHIR"},{"url":"name","valueString":"Denominator 2"},{"url":"statement","valueString":"define \"Denominator 2\":\n  \"Initial Population 2\""},{"url":"displaySequence","valueInteger":2}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"OncologyPainIntensityQuantifiedFHIR"},{"url":"name","valueString":"Chemotherapy Within 31 Days Prior and During Measurement Period"},{"url":"statement","valueString":"define \"Chemotherapy Within 31 Days Prior and During Measurement Period\":\n  [Procedure: \"Chemotherapy Administration\"] ChemoAdministration\n    where ChemoAdministration.performed.toInterval ( ) during Interval[start of \"Measurement Period\" - 31 days, end of \"Measurement Period\"]\n      and ChemoAdministration.status = 'completed'"},{"url":"displaySequence","valueInteger":3}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"OncologyPainIntensityQuantifiedFHIR"},{"url":"name","valueString":"Face to Face or Telehealth Encounter with Ongoing Chemotherapy"},{"url":"statement","valueString":"define \"Face to Face or Telehealth Encounter with Ongoing Chemotherapy\":\n  from\n    ( [Encounter: \"Office Visit\"]\n      union [Encounter: \"Audio Visual Telehealth Encounter\"] ) FaceToFaceOrTelehealthEncounter,\n    \"Chemotherapy Within 31 Days Prior and During Measurement Period\" ChemoBeforeEncounter,\n    \"Chemotherapy Within 31 Days Prior and During Measurement Period\" ChemoAfterEncounter,\n    [ConditionProblemsHealthConcerns: \"Cancer\"] CancerDx\n    where CancerDx.prevalenceInterval ( ) overlaps FaceToFaceOrTelehealthEncounter.period\n      and ChemoBeforeEncounter.performed.toInterval ( ) starts 30 days or less on or before day of end of FaceToFaceOrTelehealthEncounter.period\n      and ChemoAfterEncounter.performed.toInterval ( ) starts 30 days or less on or after day of end of FaceToFaceOrTelehealthEncounter.period\n      and not ( ChemoAfterEncounter.performed.toInterval ( ) same day as ChemoBeforeEncounter.performed.toInterval ( ) )\n      and FaceToFaceOrTelehealthEncounter.period during \"Measurement Period\"\n      and FaceToFaceOrTelehealthEncounter.status = 'finished'\n    return FaceToFaceOrTelehealthEncounter"},{"url":"displaySequence","valueInteger":4}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"OncologyPainIntensityQuantifiedFHIR"},{"url":"name","valueString":"Standard Pain Assessment with Result"},{"url":"statement","valueString":"define \"Standard Pain Assessment with Result\":\n  [ObservationScreeningAssessment: \"Standardized Pain Assessment Tool\"] AssessedPain\n    where AssessedPain.value is not null\n      and AssessedPain.status = 'final'"},{"url":"displaySequence","valueInteger":5}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"OncologyPainIntensityQuantifiedFHIR"},{"url":"name","valueString":"Numerator 1"},{"url":"statement","valueString":"define \"Numerator 1\":\n  \"Face to Face or Telehealth Encounter with Ongoing Chemotherapy\" FaceToFaceOrTelehealthEncounterWithChemo\n    with \"Standard Pain Assessment with Result\" PainAssessed\n      such that PainAssessed.effective.toInterval ( ) during FaceToFaceOrTelehealthEncounterWithChemo.period"},{"url":"displaySequence","valueInteger":6}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"OncologyPainIntensityQuantifiedFHIR"},{"url":"name","valueString":"Numerator 2"},{"url":"statement","valueString":"define \"Numerator 2\":\n  \"Radiation Treatment Management During Measurement Period with Cancer Diagnosis\" RadiationManagementEncounter\n    with \"Standard Pain Assessment with Result\" PainAssessed\n      such that case\n        when exists ( ( RadiationManagementEncounter.type ) RadiationManagement\n            where RadiationManagement ~ \"Radiation treatment management, 5 treatments\"\n        ) then PainAssessed.effective.toInterval ( ) 6 days or less on or before day of start of RadiationManagementEncounter.period \n        else PainAssessed.effective.toInterval ( ) during day of RadiationManagementEncounter.period end"},{"url":"displaySequence","valueInteger":7}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"OncologyPainIntensityQuantifiedFHIR"},{"url":"name","valueString":"Initial Population 1"},{"url":"statement","valueString":"define \"Initial Population 1\":\n  \"Face to Face or Telehealth Encounter with Ongoing Chemotherapy\""},{"url":"displaySequence","valueInteger":8}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"OncologyPainIntensityQuantifiedFHIR"},{"url":"name","valueString":"Initial Population 2"},{"url":"statement","valueString":"define \"Initial Population 2\":\n  \"Radiation Treatment Management During Measurement Period with Cancer Diagnosis\""},{"url":"displaySequence","valueInteger":9}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"OncologyPainIntensityQuantifiedFHIR"},{"url":"name","valueString":"Initial Population 1"},{"url":"statement","valueString":"define \"Initial Population 1\":\n  \"Face to Face or Telehealth Encounter with Ongoing Chemotherapy\""},{"url":"displaySequence","valueInteger":10}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"OncologyPainIntensityQuantifiedFHIR"},{"url":"name","valueString":"Denominator 1"},{"url":"statement","valueString":"define \"Denominator 1\":\n  \"Initial Population 1\""},{"url":"displaySequence","valueInteger":11}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"QICoreCommon"},{"url":"name","valueString":"isActive"},{"url":"statement","valueString":"/* Candidates for FHIRCommon */\n\n/*\n@description: Returns true if the given condition has a clinical status of active, recurrence, or relapse\n*/\ndefine fluent function isActive(condition Choice<\"ConditionEncounterDiagnosis\", \"ConditionProblemsHealthConcerns\">):\n  condition.clinicalStatus ~ \"active\"\n    or condition.clinicalStatus ~ \"recurrence\"\n    or condition.clinicalStatus ~ \"relapse\""},{"url":"displaySequence","valueInteger":12}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"QICoreCommon"},{"url":"name","valueString":"prevalenceInterval"},{"url":"statement","valueString":"/*\n@description: Returns an interval representing the normalized prevalence period of a given Condition.\n@comment: Uses the ToInterval and ToAbatementInterval functions to determine the widest potential interval from\nonset to abatement as specified in the given Condition. If the condition is active, or has an abatement date the resulting \ninterval will have a closed ending boundary. Otherwise, the resulting interval will have an open ending boundary.\n*/\ndefine fluent function prevalenceInterval(condition Choice<\"ConditionEncounterDiagnosis\", \"ConditionProblemsHealthConcerns\">):\nif condition.clinicalStatus ~ \"active\"\n  or condition.clinicalStatus ~ \"recurrence\"\n  or condition.clinicalStatus ~ \"relapse\" then\n  Interval[start of condition.onset.toInterval(), end of condition.abatementInterval()]\nelse\n    (end of condition.abatementInterval()) abatementDate\n    return if abatementDate is null then\n      Interval[start of condition.onset.toInterval(), abatementDate)\n    else\n      Interval[start of condition.onset.toInterval(), abatementDate]"},{"url":"displaySequence","valueInteger":13}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"QICoreCommon"},{"url":"name","valueString":"abatementInterval"},{"url":"statement","valueString":"/*\n@description: Returns an interval representing the normalized abatement of a given Condition.\n@comment: If the abatement element of the Condition is represented as a DateTime, the result\nis an interval beginning and ending on that DateTime.\nIf the abatement is represented as a Quantity, the quantity is expected to be a calendar-duration and is interpreted as the age of the patient. The\nresult is an interval from the date the patient turned that age to immediately before one year later.\nIf the abatement is represented as a Quantity Interval, the quantities are expected to be calendar-durations and are interpreted as an age range during\nwhich the abatement occurred. The result is an interval from the date the patient turned the starting age of the quantity interval, and ending immediately\nbefore one year later than the date the patient turned the ending age of the quantity interval.\n*/\ndefine fluent function abatementInterval(condition Choice<\"ConditionEncounterDiagnosis\", \"ConditionProblemsHealthConcerns\">):\n\tif condition.abatement is DateTime then\n\t  Interval[condition.abatement as DateTime, condition.abatement as DateTime]\n\telse if condition.abatement is Quantity then\n\t\tInterval[Patient.birthDate + (condition.abatement as Quantity),\n\t\t\tPatient.birthDate + (condition.abatement as Quantity) + 1 year)\n\telse if condition.abatement is Interval<Quantity> then\n\t  Interval[Patient.birthDate + (condition.abatement.low as Quantity),\n\t\t  Patient.birthDate + (condition.abatement.high as Quantity) + 1 year)\n\telse if condition.abatement is Interval<DateTime> then\n\t  Interval[condition.abatement.low, condition.abatement.high)\n\telse null as Interval<DateTime>"},{"url":"displaySequence","valueInteger":14}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"FHIRHelpers"},{"url":"name","valueString":"ToInterval"},{"url":"statement","valueString":"/*\n@description: Converts the given [Period](https://hl7.org/fhir/datatypes.html#Period)\nvalue to a CQL DateTime Interval\n@comment: If the start value of the given period is unspecified, the starting\nboundary of the resulting interval will be open (meaning the start of the interval\nis unknown, as opposed to interpreted as the beginning of time).\n*/\ndefine function ToInterval(period FHIR.Period):\n    if period is null then\n        null\n    else\n        if period.\"start\" is null then\n            Interval(period.\"start\".value, period.\"end\".value]\n        else\n            Interval[period.\"start\".value, period.\"end\".value]"},{"url":"displaySequence","valueInteger":15}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"QICoreCommon"},{"url":"name","valueString":"toInterval"},{"url":"statement","valueString":"/*\n@description: Normalizes a value that is a choice of timing-valued types to an equivalent interval\n@comment: Normalizes a choice type of DateTime, Quanitty, Interval<DateTime>, or Interval<Quantity> types\nto an equivalent interval. This selection of choice types is a superset of the majority of choice types that are used as possible\nrepresentations for timing-valued elements in QICore, allowing this function to be used across any resource.\nThe input can be provided as a DateTime, Quantity, Interval<DateTime> or Interval<Quantity>.\nThe intent of this function is to provide a clear and concise mechanism to treat single\nelements that have multiple possible representations as intervals so that logic doesn't have to account\nfor the variability. More complex calculations (such as medication request period or dispense period\ncalculation) need specific guidance and consideration. That guidance may make use of this function, but\nthe focus of this function is on single element calculations where the semantics are unambiguous.\nIf the input is a DateTime, the result a DateTime Interval beginning and ending on that DateTime.\nIf the input is a Quantity, the quantity is expected to be a calendar-duration interpreted as an Age,\nand the result is a DateTime Interval beginning on the Date the patient turned that age and ending immediately before one year later.\nIf the input is a DateTime Interval, the result is the input.\nIf the input is a Quantity Interval, the quantities are expected to be calendar-durations interpreted as an Age, and the result\nis a DateTime Interval beginning on the date the patient turned the age given as the start of the quantity interval, and ending\nimmediately before one year later than the date the patient turned the age given as the end of the quantity interval.\nIf the input is a Timing, an error will be thrown indicating that Timing calculations are not implemented. Any other input will reslt in a null DateTime Interval\n*/\ndefine fluent function toInterval(choice Choice<DateTime, Quantity, Interval<DateTime>, Interval<Quantity>, Timing>):\n  case\n\t  when choice is DateTime then\n    \tInterval[choice as DateTime, choice as DateTime]\n\t\twhen choice is Interval<DateTime> then\n  \t\tchoice as Interval<DateTime>\n\t\twhen choice is Quantity then\n\t\t  Interval[Patient.birthDate + (choice as Quantity),\n\t\t\t  Patient.birthDate + (choice as Quantity) + 1 year)\n\t\twhen choice is Interval<Quantity> then\n\t\t  Interval[Patient.birthDate + (choice.low as Quantity),\n\t\t\t  Patient.birthDate + (choice.high as Quantity) + 1 year)\n\t\twhen choice is Timing then\n      Message(null, true, 'NOT_IMPLEMENTED', 'Error', 'Calculation of an interval from a Timing value is not supported') as Interval<DateTime>\n\t\telse\n\t\t\tnull as Interval<DateTime>\n\tend"},{"url":"displaySequence","valueInteger":16}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"FHIRHelpers"},{"url":"name","valueString":"ToConcept"},{"url":"statement","valueString":"/*\n@description: Converts the given FHIR [CodeableConcept](https://hl7.org/fhir/datatypes.html#CodeableConcept) value to a CQL Concept.\n*/\ndefine function ToConcept(concept FHIR.CodeableConcept):\n    if concept is null then\n        null\n    else\n        System.Concept {\n            codes: concept.coding C return ToCode(C),\n            display: concept.text.value\n        }"},{"url":"displaySequence","valueInteger":17}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"FHIRHelpers"},{"url":"name","valueString":"ToCode"},{"url":"statement","valueString":"/*\n@description: Converts the given FHIR [Coding](https://hl7.org/fhir/datatypes.html#Coding) value to a CQL Code.\n*/\ndefine function ToCode(coding FHIR.Coding):\n    if coding is null then\n        null\n    else\n        System.Code {\n          code: coding.code.value,\n          system: coding.system.value,\n          version: coding.version.value,\n          display: coding.display.value\n        }"},{"url":"displaySequence","valueInteger":18}]}],"name":"EffectiveDataRequirements","status":"active","type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/library-type","code":"module-definition"}]},"relatedArtifact":[{"type":"depends-on","display":"Library QICoreCommon","resource":"Library/QICoreCommon|4.0.000"},{"type":"depends-on","display":"Library FHIRHelpers","resource":"Library/FHIRHelpers|4.4.000"},{"type":"depends-on","display":"Library FHIRHelpers","resource":"Library/FHIRHelpers|4.4.000"},{"type":"depends-on","display":"Code system ConditionClinicalStatusCodes","resource":"http://terminology.hl7.org/CodeSystem/condition-clinical"},{"type":"depends-on","display":"Code system CPT","resource":"http://www.ama-assn.org/go/cpt"},{"type":"depends-on","display":"Value set Radiation Treatment Management","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1026"},{"type":"depends-on","display":"Value set Cancer","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1010"},{"type":"depends-on","display":"Value set Office Visit","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1001"},{"type":"depends-on","display":"Value set Audio Visual Telehealth Encounter","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.1444.5.215"},{"type":"depends-on","display":"Value set Chemotherapy Administration","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1027"},{"type":"depends-on","display":"Value set Standardized Pain Assessment Tool","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1028"}],"parameter":[{"name":"Measurement Period","use":"in","min":0,"max":"1","type":"Period"},{"name":"Denominator 2","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Numerator 1","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Numerator 2","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Initial Population 1","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Initial Population 2","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Denominator 1","use":"out","min":0,"max":"*","type":"Resource"}],"dataRequirement":[{"type":"Patient","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient"]},{"type":"Encounter","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter"],"mustSupport":["type","period","status","status.value"],"codeFilter":[{"path":"type","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1026"}]},{"type":"Condition","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition-problems-health-concerns"],"mustSupport":["code"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1010"}]},{"type":"Procedure","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure"],"mustSupport":["code","performed","status","status.value"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1027"}]},{"type":"Encounter","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter"],"mustSupport":["type"],"codeFilter":[{"path":"type","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1001"}]},{"type":"Encounter","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter"],"mustSupport":["type"],"codeFilter":[{"path":"type","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.1444.5.215"}]},{"type":"Condition","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition-problems-health-concerns"],"mustSupport":["code"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1010"}]},{"type":"Procedure","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure"],"mustSupport":["code","performed","status","status.value"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1027"}]},{"type":"Procedure","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure"],"mustSupport":["code","performed","status","status.value"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1027"}]},{"type":"Observation","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-screening-assessment"],"mustSupport":["code","value","status","status.value"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1028"}]},{"type":"Observation","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-screening-assessment"],"mustSupport":["code","value","status","status.value","effective"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1028"}]},{"type":"Observation","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-screening-assessment"],"mustSupport":["code","value","status","status.value","effective"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1028"}]}]}],"extension":[{"url":"http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-effectiveDataRequirements","valueCanonical":"#effective-data-requirements"},{"id":"effective-data-requirements","url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-effectiveDataRequirements","valueReference":{"reference":"#effective-data-requirements"}},{"url":"http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-softwaresystem","valueReference":{"reference":"Device/cqf-tooling"}}],"url":"https://madie.cms.gov/Measure/OncologyPainIntensityQuantifiedFHIR","identifier":[{"use":"usual","type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/artifact-identifier-type","code":"short-name","display":"Short Name"}]},"system":"https://madie.cms.gov/measure/shortName","value":"CMS157FHIR"},{"use":"official","type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/artifact-identifier-type","code":"version-independent","display":"Version Independent"}]},"system":"urn:ietf:rfc:3986","value":"urn:uuid:b7b487bf-bc27-48c9-994f-6d095ff84500"},{"use":"official","type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/artifact-identifier-type","code":"version-specific","display":"Version Specific"}]},"system":"urn:ietf:rfc:3986","value":"urn:uuid:e8aea214-73a5-4b6c-89d1-e1d901c69386"},{"use":"official","type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/artifact-identifier-type","code":"endorser","display":"Endorser"}]},"system":"https://madie.cms.gov/measure/cbeId","value":"0384e","assigner":{"display":"CMS Consensus Based Entity"}},{"use":"official","type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/artifact-identifier-type","code":"publisher","display":"Publisher"}]},"system":"https://madie.cms.gov/measure/cmsId","value":"157FHIR","assigner":{"display":"CMS"}}],"version":"0.3.000","name":"OncologyPainIntensityQuantifiedFHIR","title":"Oncology: Medical and Radiation Pain Intensity QuantifiedFHIR","status":"active","experimental":false,"date":"2025-06-26T19:30:10+00:00","publisher":"American Society of Clinical Oncology","contact":[{"telecom":[{"system":"url","value":"www.asco.org"}]}],"description":"Percentage of patient visits, regardless of patient age, with a diagnosis of cancer currently receiving chemotherapy or radiation therapy in which pain intensity is quantified","usage":"This eCQM is an episode-based measure. An episode is defined as each eligible encounter for patients with a diagnosis of cancer who are also currently receiving chemotherapy or radiation therapy during the measurement period. \n\nFor patients receiving radiation therapy, pain intensity should be quantified at each radiation treatment management encounter where the patient and physician have a face-to-face interaction. Due to the nature of some applicable coding related to radiation therapy (e.g., delivered in multiple fractions), the billing date for certain codes may or may not be the same as the face-to-face encounter date. In this instance, for the reporting purposes of this measure, the billing date should be used to pull the appropriate patients into the initial population. It is expected, though, that the numerator criteria would be performed at the time of the actual face-to-face encounter during the series of treatments. A lookback (retrospective) period of 7 days, including the billing date, may be used to identify the actual face-to-face encounter, which is required to assess the numerator. Therefore, pain intensity should be quantified during the face-to-face encounter occurring on the actual billing date or within the 6 days prior to the billing date.\n\nFor patients receiving chemotherapy, pain intensity should be quantified at each face-to-face or telehealth encounter with the physician while the patient is currently receiving chemotherapy. For purposes of identifying eligible encounters, patients \"currently receiving chemotherapy\" refers to patients administered chemotherapy on the same day as the encounter or during the 30 days before the date of the encounter AND during the 30 days after the date of the encounter.\n\nPain intensity should be quantified using a standard instrument, such as a 0-10 numerical rating scale, visual analog scale, a categorical scale, or pictorial scale. Examples include the Faces Pain Rating Scale and the Brief Pain Inventory (BPI).\n\nThis FHIR-based measure has been derived from the QDM-based measure: CMS157v14.\n\nPlease refer to the HL7 QI-Core Implementation Guide (https://hl7.org/fhir/us/qicore/) for more information on QI-Core and mapping recommendations from QDM to QI-Core (https://hl7.org/fhir/us/qicore/qdm-to-qicore.html).","copyright":"Copyright 2025 American Society of Clinical Oncology. All Rights Reserved.","effectivePeriod":{"start":"2026-01-01","end":"2026-12-31"},"author":[{"name":"American Society of Clinical Oncology","telecom":[{"system":"url","value":"www.asco.org"}]}],"library":["https://madie.cms.gov/Library/OncologyPainIntensityQuantifiedFHIR"],"disclaimer":"The Measure is not a clinical guideline, does not establish a standard of medical care, and has not been tested for all potential applications. \n\nThe Measure, while copyrighted, can be reproduced and distributed, without modification, for noncommercial purposes, e.g., use by health care providers in connection with their practices. Commercial use is defined as the sale, license, or distribution of the Measure for commercial gain, or incorporation of the Measure into a product or service that is sold, licensed or distributed for commercial gain. \n\nCommercial uses of the Measure require a license agreement between the user and American Society of Clinical Oncology (ASCO) and prior written approval of ASCO. Contact measurement@asco.org for licensing this measure. Neither ASCO nor its members shall be responsible for any use of the Measure.\n\nThe PCPI’s and American Medical Association’s significant past efforts and contributions to the development and updating of the Measures are acknowledged. \n\nASCO is solely responsible for the review and enhancement (\"Maintenance\") of the Measure as of June 2020. \n\nASCO encourages the use of the Measure by other health care professionals, where appropriate. \n\nTHE MEASURE AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n\nLimited proprietary coding may be contained in the Measure specifications for convenience. A license agreement must be entered prior to a third party’s use of Current Procedural Terminology (CPT[R]) or other proprietary code set contained in the Measures. Any other use of CPT or other coding by the third party is strictly prohibited. ASCO and its members disclaim all liability for use or accuracy of any CPT or other coding contained in the specifications. \n\nCPT(R) contained in the Measure specifications is copyright 2004-2024 American Medical Association. LOINC(R) is copyright 2004-2024 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2024 International Health Terminology Standards Development Organisation. ICD-10 is copyright 2024 World Health Organization. All Rights Reserved.\n\nDue to technical limitations, registered trademarks are indicated by (R) or [R].","rationale":"Pain is a commonly occurring symptom for cancer patients as 30% to 50% (510,000 to 850,000 each year based on current statistics) will experience moderate to severe pain (Wiffen, Wee, Derry, Bell, & Moore, 2017). Initial and ongoing pain assessments are essential to determine the pathophysiology of pain and ensure proper pain management. According to the National Comprehensive Cancer Network (NCCN, 2024), undertreatment of pain remains a problem among a significant subset of cancer patients, survival is linked with symptom control and pain management, and pain management contributes to broad quality of life improvement. Furthermore, NCCN notes that formal pain reevaluation is required at each contact to ensure that pain management therapies are successfully meeting patient-specific goals for comfort, function, and safety. Cancer patients have reported that pain interferes with their mood, work, relationships with other people, sleep and overall enjoyment of life (Moryl et al., 2018). Pain management is an essential part of oncologic management and contributes to a patient’s overall function and quality of life (NCCN, 2024).  \n\nA recent analysis of registry data for chronic pain cancer patients found average pain intensity reported as mild (24.6% of patients), moderate (41.5%), and severe (33.9%). The study also indicated that patient report of pain relief is inversely related to the average pain intensity reported (Moryl et al., 2018). These data suggest that assessing and managing a cancer patient’s pain is critical and there remains significant room for improvement in assessing and mitigating cancer-related pain. A prospective study of changes in pain severity of cancer patients found that, at initial assessment, 47% of patients reported pain. At follow-up, the patients with pain at initial assessment reported reduced pain (32.2%), stable pain (48.2%) and worse pain (19.6%). Of the 53% of patients reporting no pain at initial assessment, 82.6% reported stable pain and 17.4% reported worse pain at follow-up assessment (Zhao et al., 2014). This study highlights the importance of initial and ongoing assessments of pain to identify gaps and ensure proper pain management.","clinicalRecommendationStatement":"-Screen all patients for pain at each contact. \n\n-Routinely quantify and document pain intensity and quality as characterized by the patient (whenever possible). Include patient reporting of breakthrough pain, treatments used and their impact on pain, satisfaction with pain relief, pain interference, provider assessment of impact on function, and any special issues for the patient relevant to pain treatment and access to care. If necessary, get additional information from caregiver regarding pain and impact on function. \n\n-Perform comprehensive pain assessment if new or worsening pain is present and regularly for persisting pain.\n\nVarious methods and tools exist to assess pain severity. Intensity of pain should be quantified using a numerical rating scale (i.e., 0-10), visual analog scale, categorical scale, or pictorial scale (e.g., The Faces Pain Rating Scale) (Category 2A) (National Comprehensive Cancer Network, 2024).","guidance":"This eCQM is an episode-based measure. An episode is defined as each eligible encounter for patients with a diagnosis of cancer who are also currently receiving chemotherapy or radiation therapy during the measurement period. \n\nFor patients receiving radiation therapy, pain intensity should be quantified at each radiation treatment management encounter where the patient and physician have a face-to-face interaction. Due to the nature of some applicable coding related to radiation therapy (e.g., delivered in multiple fractions), the billing date for certain codes may or may not be the same as the face-to-face encounter date. In this instance, for the reporting purposes of this measure, the billing date should be used to pull the appropriate patients into the initial population. It is expected, though, that the numerator criteria would be performed at the time of the actual face-to-face encounter during the series of treatments. A lookback (retrospective) period of 7 days, including the billing date, may be used to identify the actual face-to-face encounter, which is required to assess the numerator. Therefore, pain intensity should be quantified during the face-to-face encounter occurring on the actual billing date or within the 6 days prior to the billing date.\n\nFor patients receiving chemotherapy, pain intensity should be quantified at each face-to-face or telehealth encounter with the physician while the patient is currently receiving chemotherapy. For purposes of identifying eligible encounters, patients \"currently receiving chemotherapy\" refers to patients administered chemotherapy on the same day as the encounter or during the 30 days before the date of the encounter AND during the 30 days after the date of the encounter.\n\nPain intensity should be quantified using a standard instrument, such as a 0-10 numerical rating scale, visual analog scale, a categorical scale, or pictorial scale. Examples include the Faces Pain Rating Scale and the Brief Pain Inventory (BPI).\n\nThis FHIR-based measure has been derived from the QDM-based measure: CMS157v14.\n\nPlease refer to the HL7 QI-Core Implementation Guide (https://hl7.org/fhir/us/qicore/) for more information on QI-Core and mapping recommendations from QDM to QI-Core (https://hl7.org/fhir/us/qicore/qdm-to-qicore.html).","group":[{"id":"Group_1","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-scoring","valueCodeableConcept":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-scoring","code":"proportion","display":"Proportion"}]}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-populationBasis","valueCode":"Encounter"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-type","valueCodeableConcept":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-type","code":"process","display":"Process"}]}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-rateAggregation","valueCode":"This measure is intended to have one reporting rate, which aggregates the following populations into a single performance rate for reporting purposes: \n- Population 1: Visits for patients with a diagnosis of cancer who are currently receiving chemotherapy \n- Population 2: Visits for patients with a diagnosis of cancer who are currently receiving radiation therapy\n\nFor the purposes of this measure, a single performance rate can be calculated as follows:\nPerformance Rate = (Numerator 1 + Numerator 2)/ (Denominator 1 + Denominator 2)"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-improvementNotation","valueCodeableConcept":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-improvement-notation","code":"increase","display":"Increased score indicates improvement"}]}}],"description":"Percentage of patient visits, regardless of patient age, with a diagnosis of cancer currently receiving chemotherapy in which pain intensity is quantified","population":[{"id":"InitialPopulation_1","code":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-population","code":"initial-population","display":"Initial Population"}]},"description":"All patient visits, regardless of patient age, with a diagnosis of cancer currently receiving chemotherapy ","criteria":{"language":"text/cql-identifier","expression":"Initial Population 1"}},{"id":"Denominator_1","code":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-population","code":"denominator","display":"Denominator"}]},"description":"Equals Initial Population","criteria":{"language":"text/cql-identifier","expression":"Denominator 1"}},{"id":"Numerator_1","code":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-population","code":"numerator","display":"Numerator"}]},"description":"Patient visits in which pain intensity is quantified","criteria":{"language":"text/cql-identifier","expression":"Numerator 1"}}]},{"id":"Group_2","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-scoring","valueCodeableConcept":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-scoring","code":"proportion","display":"Proportion"}]}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-populationBasis","valueCode":"Encounter"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-type","valueCodeableConcept":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-type","code":"process","display":"Process"}]}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-rateAggregation","valueCode":"This measure is intended to have one reporting rate, which aggregates the following populations into a single performance rate for reporting purposes: \n- Population 1: Visits for patients with a diagnosis of cancer who are currently receiving chemotherapy \n- Population 2: Visits for patients with a diagnosis of cancer who are currently receiving radiation therapy\n\nFor the purposes of this measure, a single performance rate can be calculated as follows:\nPerformance Rate = (Numerator 1 + Numerator 2)/ (Denominator 1 + Denominator 2)"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-improvementNotation","valueCodeableConcept":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-improvement-notation","code":"increase","display":"Increased score indicates improvement"}]}}],"description":"Percentage of patient visits, regardless of patient age, with a diagnosis of cancer currently radiation therapy in which pain intensity is quantified","population":[{"id":"InitialPopulation_2","code":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-population","code":"initial-population","display":"Initial Population"}]},"description":"All patient visits, regardless of patient age, with a diagnosis of cancer currently receiving radiation therapy","criteria":{"language":"text/cql-identifier","expression":"Initial Population 2"}},{"id":"Denominator_2","code":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-population","code":"denominator","display":"Denominator"}]},"description":"Equals Initial Population","criteria":{"language":"text/cql-identifier","expression":"Denominator 2"}},{"id":"Numerator_2","code":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-population","code":"numerator","display":"Numerator"}]},"description":"Patient visits in which pain intensity is quantified","criteria":{"language":"text/cql-identifier","expression":"Numerator 2"}}]}]},"request":{"method":"PUT","url":"Measure/OncologyPainIntensityQuantifiedFHIR"}}]}