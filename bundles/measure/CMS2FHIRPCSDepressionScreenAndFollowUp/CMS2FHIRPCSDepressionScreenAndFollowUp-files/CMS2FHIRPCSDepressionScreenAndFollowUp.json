{
  "resourceType": "Library",
  "id": "CMS2FHIRPCSDepressionScreenAndFollowUp",
  "meta": {
    "profile": [ "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareablelibrary", "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-computablelibrary", "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-publishablelibrary", "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-executablelibrary", "http://hl7.org/fhir/uv/cql/StructureDefinition/cql-library", "http://hl7.org/fhir/uv/cql/StructureDefinition/elm-json-library", "http://hl7.org/fhir/uv/cql/StructureDefinition/elm-xml-library" ]
  },
  "language": "en",
  "text": {
    "status": "extensions",
    "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n    <table class=\"grid dict\">\n        \n        \n        <tr>\n            <th scope=\"row\"><b>Title: </b></th>\n            <td style=\"padding-left: 4px;\">CMS2FHIRPCSDepressionScreenAndFollowUp</td>\n        </tr>\n        \n\n        \n        \n        <tr>\n            <th scope=\"row\"><b>Id: </b></th>\n            <td style=\"padding-left: 4px;\">CMS2FHIRPCSDepressionScreenAndFollowUp</td>\n        </tr>\n        \n\n        \n        \n        <tr>\n            <th scope=\"row\"><b>Version: </b></th>\n            <td style=\"padding-left: 4px;\">0.4.000</td>\n        </tr>\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Url: </b></th>\n            <td style=\"padding-left: 4px;\">https://madie.cms.gov/Library/CMS2FHIRPCSDepressionScreenAndFollowUp</td>\n        </tr>\n        \n\n        \n        <tr>\n            <th scope=\"row\">\n                <b>\n                    \n                        official\n                    \n                </b>\n            </th>\n            <td style=\"padding-left: 4px;\">\n                \n                <p style=\"margin-bottom: 5px;\">\n                    <span>CMS2FHIRPCSDepressionScreenAndFollowUp</span>\n                </p>\n                \n            </td>\n        </tr>\n        \n\n        \n\n        \n\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Type: </b></th>\n            <td style=\"padding-left: 4px;\">\n                \n                    \n                        \n                        <p style=\"margin-bottom: 5px;\">\n                            <b>system: </b> <span>http://terminology.hl7.org/CodeSystem/library-type</span>\n                        </p>\n                        \n                        \n                        <p style=\"margin-bottom: 5px;\">\n                            <b>code: </b> <span>logic-library</span>\n                        </p>\n                        \n                        \n                    \n                \n                \n            </td>\n        </tr>\n        \n\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Date: </b></th>\n            <td style=\"padding-left: 4px;\">2025-04-28T20:37:03+00:00</td>\n        </tr>\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Publisher: </b></th>\n            <td style=\"padding-left: 4px;\">Centers for Medicare &amp; Medicaid Services (CMS)</td>\n        </tr>\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Description: </b></th>\n            <td style=\"padding-left: 4px;\">CMS2FHIRPCSDepressionScreenAndFollowUp</td>\n        </tr>\n        \n\n        \n\n        \n\n        \n\n        \n\n        \n\n        \n\n        \n\n        \n\n        \n\n        \n\n        \n        <tr>\n            <th scope=\"row\"><b>Related Artifacts: </b></th>\n            <td style=\"padding-left: 4px;\">\n                \n                \n                \n                <p><b>Dependencies</b></p>\n                <ul>\n                  \n                    <li>https://madie.cms.gov/Library/SupplementalDataElements|5.1.000</li>\n                  \n                    <li>https://madie.cms.gov/Library/FHIRHelpers|4.4.000</li>\n                  \n                    <li>https://madie.cms.gov/Library/QICoreCommon|4.0.000</li>\n                  \n                    <li>https://madie.cms.gov/Library/CumulativeMedicationDuration|6.0.000</li>\n                  \n                    <li>http://loinc.org</li>\n                  \n                    <li>http://snomed.info/sct</li>\n                  \n                    <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1916</li>\n                  \n                    <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1022</li>\n                  \n                    <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1080</li>\n                  \n                    <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1567</li>\n                  \n                    <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1570</li>\n                  \n                    <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1569</li>\n                  \n                    <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1566</li>\n                  \n                    <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1571</li>\n                  \n                    <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1568</li>\n                  \n                    <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.67.1.101.1.128</li>\n                  \n                    <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1007</li>\n                  \n                </ul>\n                \n                \n                \n                \n                \n            </td>\n        </tr>\n        \n\n        \n\n        \n        <tr>\n          <th scope=\"row\"><b>Data Requirements:</b></th>\n          <td style=\"padding-left: 4px;\">\n            <table class=\"grid-dict\">\n              <tr><th><b>Type</b></th><th><b>Profile</b></th><th><b>MS</b></th><th><b>Code Filter</b></th></tr>\n              \n                <tr>\n                  <th>Patient</th>\n                  <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient</th>\n                  <th>;;</th>\n                  <th>\n                    \n                  </th>\n                </tr>\n              \n                <tr>\n                  <th>Encounter</th>\n                  <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter</th>\n                  <th>;</th>\n                  <th>\n                    \n                      <b>code filter: </b>\n                      \n                      <br/>\n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>path: </b><span>type</span>\n                      </span>\n                      \n                      <br/>\n                      \n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1916</span>\n                      </span>\n                      \n                      \n                    \n                  </th>\n                </tr>\n              \n                <tr>\n                  <th>Encounter</th>\n                  <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter</th>\n                  <th>;</th>\n                  <th>\n                    \n                      <b>code filter: </b>\n                      \n                      <br/>\n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>path: </b><span>type</span>\n                      </span>\n                      \n                      <br/>\n                      \n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1022</span>\n                      </span>\n                      \n                      \n                    \n                  </th>\n                </tr>\n              \n                <tr>\n                  <th>Encounter</th>\n                  <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter</th>\n                  <th>;</th>\n                  <th>\n                    \n                      <b>code filter: </b>\n                      \n                      <br/>\n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>path: </b><span>type</span>\n                      </span>\n                      \n                      <br/>\n                      \n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1080</span>\n                      </span>\n                      \n                      \n                    \n                  </th>\n                </tr>\n              \n                <tr>\n                  <th>MedicationRequest</th>\n                  <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest</th>\n                  <th>;;;;;</th>\n                  <th>\n                    \n                      <b>code filter: </b>\n                      \n                      <br/>\n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>path: </b><span>medication</span>\n                      </span>\n                      \n                      <br/>\n                      \n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1567</span>\n                      </span>\n                      \n                      \n                    \n                  </th>\n                </tr>\n              \n                <tr>\n                  <th>MedicationRequest</th>\n                  <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest</th>\n                  <th>;;;;;</th>\n                  <th>\n                    \n                      <b>code filter: </b>\n                      \n                      <br/>\n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>path: </b><span>medication</span>\n                      </span>\n                      \n                      <br/>\n                      \n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1566</span>\n                      </span>\n                      \n                      \n                    \n                  </th>\n                </tr>\n              \n                <tr>\n                  <th>MedicationRequest</th>\n                  <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest</th>\n                  <th>;;;;;</th>\n                  <th>\n                    \n                  </th>\n                </tr>\n              \n                <tr>\n                  <th>Medication</th>\n                  <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medication</th>\n                  <th>;;</th>\n                  <th>\n                    \n                  </th>\n                </tr>\n              \n                <tr>\n                  <th>ServiceRequest</th>\n                  <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicerequest</th>\n                  <th>;;;</th>\n                  <th>\n                    \n                      <b>code filter: </b>\n                      \n                      <br/>\n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>path: </b><span>code</span>\n                      </span>\n                      \n                      <br/>\n                      \n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1570</span>\n                      </span>\n                      \n                      \n                    \n                  </th>\n                </tr>\n              \n                <tr>\n                  <th>ServiceRequest</th>\n                  <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicerequest</th>\n                  <th>;;;</th>\n                  <th>\n                    \n                      <b>code filter: </b>\n                      \n                      <br/>\n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>path: </b><span>code</span>\n                      </span>\n                      \n                      <br/>\n                      \n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1571</span>\n                      </span>\n                      \n                      \n                    \n                  </th>\n                </tr>\n              \n                <tr>\n                  <th>Procedure</th>\n                  <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure</th>\n                  <th>;;;</th>\n                  <th>\n                    \n                      <b>code filter: </b>\n                      \n                      <br/>\n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>path: </b><span>code</span>\n                      </span>\n                      \n                      <br/>\n                      \n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1569</span>\n                      </span>\n                      \n                      \n                    \n                  </th>\n                </tr>\n              \n                <tr>\n                  <th>Procedure</th>\n                  <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure</th>\n                  <th>;;;</th>\n                  <th>\n                    \n                      <b>code filter: </b>\n                      \n                      <br/>\n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>path: </b><span>code</span>\n                      </span>\n                      \n                      <br/>\n                      \n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1568</span>\n                      </span>\n                      \n                      \n                    \n                  </th>\n                </tr>\n              \n                <tr>\n                  <th>Coverage</th>\n                  <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-coverage</th>\n                  <th>;;</th>\n                  <th>\n                    \n                      <b>code filter: </b>\n                      \n                      <br/>\n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>path: </b><span>type</span>\n                      </span>\n                      \n                      <br/>\n                      \n                      \n                      \n                      <span style=\"padding-left: 4px;\">\n                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.3591</span>\n                      </span>\n                      \n                      \n                    \n                  </th>\n                </tr>\n              \n            </table>\n          </td>\n        </tr>\n        \n\n        \n        \n        <tr>\n          <td colspan=\"2\">\n            <table>\n              <tr><th><a id=\"cql-content\"><b>Content: </b></a> text/cql</th></tr>\n              <tr><td><pre><code class=\"language-cql\">library CMS2FHIRPCSDepressionScreenAndFollowUp version '0.4.000'\r\n\r\nusing QICore version '6.0.0'\r\n\r\ninclude FHIRHelpers version '4.4.000' called FHIRHelpers\r\ninclude QICoreCommon version '4.0.000' called QICoreCommon\r\ninclude CumulativeMedicationDuration version '6.0.000' called CMD\r\ninclude SupplementalDataElements version '5.1.000' called SDE\r\n\r\ncodesystem &quot;LOINC&quot;: 'http://loinc.org'\r\ncodesystem &quot;SNOMEDCT&quot;: 'http://snomed.info/sct'\r\n\r\nvalueset &quot;Adolescent Depression Medications&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1567'\r\nvalueset &quot;Adult Depression Medications&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1566'\r\nvalueset &quot;Bipolar Disorder&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.67.1.101.1.128'\r\nvalueset &quot;Encounter to Screen for Depression&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1916'\r\nvalueset &quot;Follow Up for Adolescent Depression&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1569'\r\nvalueset &quot;Follow Up for Adult Depression&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1568'\r\nvalueset &quot;Medical Reason&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1007'\r\nvalueset &quot;Physical Therapy Evaluation&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1022'\r\nvalueset &quot;Referral for Adolescent Depression&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1570'\r\nvalueset &quot;Referral for Adult Depression&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1571'\r\nvalueset &quot;Telephone Visits&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1080'\r\n\r\ncode &quot;Adolescent depression screening assessment&quot;: '73831-0' from &quot;LOINC&quot; display 'Adolescent depression screening assessment'\r\ncode &quot;Adult depression screening assessment&quot;: '73832-8' from &quot;LOINC&quot; display 'Adult depression screening assessment'\r\ncode &quot;Depression screening declined (situation)&quot;: '720834000' from &quot;SNOMEDCT&quot; display 'Depression screening declined (situation)'\r\ncode &quot;Depression screening negative (finding)&quot;: '428171000124102' from &quot;SNOMEDCT&quot; display 'Depression screening negative (finding)'\r\ncode &quot;Depression screening positive (finding)&quot;: '428181000124104' from &quot;SNOMEDCT&quot; display 'Depression screening positive (finding)'\r\n\r\nparameter &quot;Measurement Period&quot; Interval&lt;DateTime&gt;\r\n\r\ncontext Patient\r\n\r\ndefine &quot;Initial Population&quot;:\r\n  &quot;Patient Age 12 Years or Older at Start of Measurement Period&quot;\r\n    and exists ( &quot;Qualifying Encounter During Measurement Period&quot; )\r\n\r\ndefine &quot;Denominator&quot;:\r\n  &quot;Initial Population&quot;\r\n\r\ndefine &quot;Denominator Exclusions&quot;:\r\n  exists &quot;History of Bipolar Diagnosis Before Qualifying Encounter&quot;\r\n\r\ndefine &quot;Numerator&quot;:\r\n  ( &quot;Patient Age 12 to 16 Years at Start of Measurement Period&quot;\r\n      and ( &quot;Has Most Recent Adolescent Screening Negative&quot;\r\n          or exists &quot;Most Recent Adolescent Depression Screening Positive and Follow Up Provided&quot;\r\n          or exists &quot;Most Recent Adolescent Depression Screening Positive and Depression Medication Active&quot;\r\n      )\r\n  )\r\n    or ( &quot;Patient Age 17 Years at Start of Measurement Period&quot;\r\n        and ( &quot;Has Most Recent Adolescent Screening Negative&quot;\r\n            or exists &quot;Most Recent Adolescent Depression Screening Positive and Follow Up Provided&quot;\r\n            or exists &quot;Most Recent Adolescent Depression Screening Positive and Depression Medication Active&quot;\r\n            or &quot;Has Most Recent Adult Screening Negative&quot;\r\n            or exists &quot;Most Recent Adult Depression Screening Positive and Follow Up Provided&quot;\r\n            or exists &quot;Most Recent Adult Depression Screening Positive and Depression Medication Active&quot;\r\n        )\r\n    )\r\n    or ( &quot;Patient Age 18 Years or Older at Start of Measurement Period&quot;\r\n        and ( &quot;Has Most Recent Adult Screening Negative&quot;\r\n            or exists &quot;Most Recent Adult Depression Screening Positive and Follow Up Provided&quot;\r\n            or exists &quot;Most Recent Adult Depression Screening Positive and Depression Medication Active&quot;\r\n        )\r\n    )\r\n\r\ndefine &quot;Denominator Exceptions&quot;:\r\n  ( exists &quot;Medical or Patient Reason for Not Screening Adolescent for Depression&quot;\r\n      and not &quot;Has Adolescent Depression Screening&quot;\r\n  )\r\n    or ( exists &quot;Medical or Patient Reason for Not Screening Adult for Depression&quot;\r\n        and not &quot;Has Adult Depression Screening&quot;\r\n    )\r\n\r\ndefine &quot;Follow Up Intervention for Positive Adolescent Depression Screening&quot;:\r\n  ( ( [MedicationRequest: &quot;Adolescent Depression Medications&quot;] AdolescentMed\r\n        where AdolescentMed.status in { 'active', 'completed' }\r\n          and AdolescentMed.intent = 'order'\r\n    )\r\n      union ( [ServiceRequest: &quot;Referral for Adolescent Depression&quot;] AdolescentReferral\r\n          where AdolescentReferral.status in { 'active', 'completed' }\r\n      )\r\n      union ( [Procedure: &quot;Follow Up for Adolescent Depression&quot;] AdolescentFollowUp\r\n          where AdolescentFollowUp.status = 'completed'\r\n      )\r\n  )\r\n\r\ndefine &quot;Follow Up Intervention for Positive Adult Depression Screening&quot;:\r\n  ( ( [MedicationRequest: &quot;Adult Depression Medications&quot;] AdultMed\r\n        where AdultMed.status in { 'active', 'completed' }\r\n          and AdultMed.intent = 'order'\r\n    )\r\n      union ( [ServiceRequest: &quot;Referral for Adult Depression&quot;] AdultReferral\r\n          where AdultReferral.status in { 'active', 'completed' }\r\n      )\r\n      union ( [Procedure: &quot;Follow Up for Adult Depression&quot;] AdultFollowUp\r\n          where AdultFollowUp.status = 'completed'\r\n      )\r\n  )\r\n\r\ndefine &quot;Has Adolescent Depression Screening&quot;:\r\n  exists ( [ObservationScreeningAssessment: &quot;Adolescent depression screening assessment&quot;] AdolescentScreening\r\n      with &quot;Qualifying Encounter During Measurement Period&quot; QualifyingEncounter\r\n        such that AdolescentScreening.effective.toInterval ( ) 14 days or less on or before day of start of QualifyingEncounter.period\r\n          and AdolescentScreening.value is not null\r\n          and AdolescentScreening.status = 'final'\r\n  )\r\n\r\ndefine &quot;Has Adult Depression Screening&quot;:\r\n  exists ( [ObservationScreeningAssessment: &quot;Adult depression screening assessment&quot;] AdultScreening\r\n      with &quot;Qualifying Encounter During Measurement Period&quot; QualifyingEncounter\r\n        such that AdultScreening.effective.toInterval ( ) 14 days or less on or before day of start of QualifyingEncounter.period\r\n          and AdultScreening.value is not null\r\n          and AdultScreening.status = 'final'\r\n  )\r\n\r\ndefine &quot;Has Most Recent Adolescent Screening Negative&quot;:\r\n  ( &quot;Most Recent Adolescent Depression Screening&quot; AdolescentScreen\r\n      where AdolescentScreen.value ~ &quot;Depression screening negative (finding)&quot;\r\n  ) is not null\r\n\r\ndefine &quot;Has Most Recent Adult Screening Negative&quot;:\r\n  ( &quot;Most Recent Adult Depression Screening&quot; AdultScreen\r\n      where AdultScreen.value ~ &quot;Depression screening negative (finding)&quot;\r\n  ) is not null\r\n\r\ndefine &quot;History of Bipolar Diagnosis Before Qualifying Encounter&quot;:\r\n  [ConditionProblemsHealthConcerns: &quot;Bipolar Disorder&quot;] BipolarDiagnosis\r\n    with &quot;Qualifying Encounter During Measurement Period&quot; QualifyingEncounter\r\n      such that BipolarDiagnosis.prevalenceInterval ( ) starts before day of start of QualifyingEncounter.period\r\n\r\ndefine &quot;Medical or Patient Reason for Not Screening Adolescent for Depression&quot;:\r\n  [ObservationCancelled: code ~ &quot;Adolescent depression screening assessment&quot;] NoAdolescentScreen\r\n    with &quot;Qualifying Encounter During Measurement Period&quot; QualifyingEncounter\r\n      such that NoAdolescentScreen.issued during day of QualifyingEncounter.period\r\n    where ( NoAdolescentScreen.notDoneReason ~ &quot;Depression screening declined (situation)&quot;\r\n        or NoAdolescentScreen.notDoneReason in &quot;Medical Reason&quot;\r\n    )\r\n      and NoAdolescentScreen.status = 'cancelled'\r\n\r\ndefine &quot;Medical or Patient Reason for Not Screening Adult for Depression&quot;:\r\n  [ObservationCancelled: code ~ &quot;Adult depression screening assessment&quot;] NoAdultScreen\r\n    with &quot;Qualifying Encounter During Measurement Period&quot; QualifyingEncounter\r\n      such that NoAdultScreen.issued during day of QualifyingEncounter.period\r\n    where ( NoAdultScreen.notDoneReason ~ &quot;Depression screening declined (situation)&quot;\r\n        or NoAdultScreen.notDoneReason in &quot;Medical Reason&quot;\r\n    )\r\n      and NoAdultScreen.status = 'cancelled'\r\n\r\ndefine &quot;Most Recent Adolescent Depression Screening&quot;:\r\n  Last([ObservationScreeningAssessment: &quot;Adolescent depression screening assessment&quot;] AdolescentDepressionScreening\r\n      with &quot;Qualifying Encounter During Measurement Period&quot; QualifyingEncounter\r\n        such that AdolescentDepressionScreening.effective.toInterval() 14 days or less on or before day of start of QualifyingEncounter.period\r\n          and AdolescentDepressionScreening.value is not null\r\n          and AdolescentDepressionScreening.status = 'final'\r\n      sort by start of effective.toInterval()\r\n  )\r\n\r\ndefine &quot;Most Recent Adolescent Depression Screening Positive and Depression Medication Active&quot;:\r\n  from\r\n    [MedicationRequest: &quot;Adolescent Depression Medications&quot;] ActiveAdolescentMedications,\r\n    &quot;Most Recent Adolescent Depression Screening&quot; LastAdolescentScreen,\r\n    &quot;Qualifying Encounter During Measurement Period&quot; QualifyingEncounter\r\n    where LastAdolescentScreen.effective.toInterval ( ) starts 14 days or less on or before day of start of QualifyingEncounter.period\r\n      and LastAdolescentScreen.value ~ &quot;Depression screening positive (finding)&quot;\r\n      and ActiveAdolescentMedications.status in { 'active', 'completed' }\r\n      and ActiveAdolescentMedications.intent = 'order'\r\n      and ActiveAdolescentMedications.medicationRequestPeriod ( ).toInterval ( ) overlaps after day of QualifyingEncounter.period\r\n\r\ndefine &quot;Most Recent Adolescent Depression Screening Positive and Follow Up Provided&quot;:\r\n  from\r\n    &quot;Most Recent Adolescent Depression Screening&quot; LastAdolescentScreen,\r\n    &quot;Follow Up Intervention for Positive Adolescent Depression Screening&quot; FollowUpPositiveAdolescentScreen,\r\n    &quot;Qualifying Encounter During Measurement Period&quot; QualifyingEncounter\r\n    where LastAdolescentScreen.effective.toInterval ( ) starts 14 days or less on or before day of start of QualifyingEncounter.period\r\n      and LastAdolescentScreen.value ~ &quot;Depression screening positive (finding)&quot;\r\n      and ( start of FollowUpPositiveAdolescentScreen.performed.toInterval ( ) during QualifyingEncounter.period\r\n          or FollowUpPositiveAdolescentScreen.authoredOn 2 days or less on or after day of end of QualifyingEncounter.period\r\n      )\r\n      and ( Coalesce(start of FollowUpPositiveAdolescentScreen.performed.toInterval(), FollowUpPositiveAdolescentScreen.authoredOn) during day of &quot;Measurement Period&quot; )\r\n\r\ndefine &quot;Most Recent Adult Depression Screening&quot;:\r\n  Last([ObservationScreeningAssessment: &quot;Adult depression screening assessment&quot;] AdultDepressionScreening\r\n      with &quot;Qualifying Encounter During Measurement Period&quot; QualifyingEncounter\r\n        such that AdultDepressionScreening.effective.toInterval() 14 days or less on or before day of start of QualifyingEncounter.period\r\n          and AdultDepressionScreening.value is not null\r\n          and AdultDepressionScreening.status = 'final'\r\n      sort by start of effective.toInterval()\r\n  )\r\n\r\ndefine &quot;Most Recent Adult Depression Screening Positive and Depression Medication Active&quot;:\r\n  from\r\n    [MedicationRequest: &quot;Adult Depression Medications&quot;] ActiveAdultMedications,\r\n    &quot;Most Recent Adult Depression Screening&quot; LastAdultScreen,\r\n    &quot;Qualifying Encounter During Measurement Period&quot; QualifyingEncounter\r\n    where LastAdultScreen.effective.toInterval ( ) starts 14 days or less on or before day of start of QualifyingEncounter.period\r\n      and LastAdultScreen.value ~ &quot;Depression screening positive (finding)&quot;\r\n      and ActiveAdultMedications.status in { 'active', 'completed' }\r\n      and ActiveAdultMedications.intent = 'order'\r\n      and ActiveAdultMedications.medicationRequestPeriod ( ).toInterval ( ) overlaps after day of QualifyingEncounter.period\r\n\r\ndefine &quot;Most Recent Adult Depression Screening Positive and Follow Up Provided&quot;:\r\n  from\r\n    &quot;Most Recent Adult Depression Screening&quot; LastAdultScreen,\r\n    &quot;Follow Up Intervention for Positive Adult Depression Screening&quot; FollowUpPositiveAdultScreen,\r\n    &quot;Qualifying Encounter During Measurement Period&quot; QualifyingEncounter\r\n    where LastAdultScreen.effective.toInterval ( ) starts 14 days or less on or before day of start of QualifyingEncounter.period\r\n      and LastAdultScreen.value ~ &quot;Depression screening positive (finding)&quot;\r\n      and ( start of FollowUpPositiveAdultScreen.performed.toInterval ( ) during QualifyingEncounter.period\r\n          or FollowUpPositiveAdultScreen.authoredOn 2 days or less on or after day of end of QualifyingEncounter.period\r\n      )\r\n      and ( Coalesce(start of FollowUpPositiveAdultScreen.performed.toInterval(), FollowUpPositiveAdultScreen.authoredOn) during day of &quot;Measurement Period&quot; )\r\n\r\ndefine &quot;Patient Age 12 to 16 Years at Start of Measurement Period&quot;:\r\n  AgeInYearsAt(date from start of &quot;Measurement Period&quot;) in Interval[12, 16]\r\n\r\ndefine &quot;Patient Age 12 Years or Older at Start of Measurement Period&quot;:\r\n  AgeInYearsAt(date from start of &quot;Measurement Period&quot;) &gt;= 12\r\n\r\ndefine &quot;Patient Age 17 Years at Start of Measurement Period&quot;:\r\n  AgeInYearsAt(date from start of &quot;Measurement Period&quot;) = 17\r\n\r\ndefine &quot;Patient Age 18 Years or Older at Start of Measurement Period&quot;:\r\n  AgeInYearsAt(date from start of &quot;Measurement Period&quot;) &gt;= 18\r\n\r\ndefine &quot;Qualifying Encounter During Measurement Period&quot;:\r\n  ( [Encounter: type in &quot;Encounter to Screen for Depression&quot;]\r\n    union [Encounter: type in &quot;Physical Therapy Evaluation&quot;]\r\n    union [Encounter: type in &quot;Telephone Visits&quot;] ) QualifyingEncounter\r\n    where QualifyingEncounter.period during day of &quot;Measurement Period&quot;\r\n      and QualifyingEncounter.status = 'finished'\r\n\r\ndefine &quot;SDE Ethnicity&quot;:\r\n  SDE.&quot;SDE Ethnicity&quot;\r\n\r\ndefine &quot;SDE Payer&quot;:\r\n  SDE.&quot;SDE Payer&quot;\r\n\r\ndefine &quot;SDE Race&quot;:\r\n  SDE.&quot;SDE Race&quot;\r\n\r\ndefine &quot;SDE Sex&quot;:\r\n  SDE.&quot;SDE Sex&quot;</code></pre></td></tr>\n            </table>\n          </td>\n        </tr>\n        \n        \n        \n    </table>\n</div>"
  },
  "contained": [ {
    "resourceType": "Parameters",
    "id": "options",
    "parameter": [ {
      "name": "translatorVersion",
      "valueString": "3.25.0"
    }, {
      "name": "option",
      "valueString": "EnableAnnotations"
    }, {
      "name": "option",
      "valueString": "EnableLocators"
    }, {
      "name": "option",
      "valueString": "DisableListDemotion"
    }, {
      "name": "option",
      "valueString": "DisableListPromotion"
    }, {
      "name": "format",
      "valueString": "XML"
    }, {
      "name": "format",
      "valueString": "JSON"
    }, {
      "name": "analyzeDataRequirements",
      "valueBoolean": false
    }, {
      "name": "collapseDataRequirements",
      "valueBoolean": false
    }, {
      "name": "compatibilityLevel",
      "valueString": "1.5"
    }, {
      "name": "enableCqlOnly",
      "valueBoolean": false
    }, {
      "name": "errorLevel",
      "valueString": "Info"
    }, {
      "name": "signatureLevel",
      "valueString": "Overloads"
    }, {
      "name": "validateUnits",
      "valueBoolean": true
    }, {
      "name": "verifyOnly",
      "valueBoolean": false
    } ]
  } ],
  "extension": [ {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://loinc.org",
      "code": "73831-0",
      "display": "Adolescent depression screening assessment"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://loinc.org",
      "code": "73832-8",
      "display": "Adult depression screening assessment"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://snomed.info/sct",
      "code": "720834000",
      "display": "Depression screening declined (situation)"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://snomed.info/sct",
      "code": "428171000124102",
      "display": "Depression screening negative (finding)"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://snomed.info/sct",
      "code": "428181000124104",
      "display": "Depression screening positive (finding)"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-cqlOptions",
    "valueReference": {
      "reference": "#options"
    }
  }, {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-softwaresystem",
    "valueReference": {
      "reference": "Device/cqf-tooling"
    }
  } ],
  "url": "https://madie.cms.gov/Library/CMS2FHIRPCSDepressionScreenAndFollowUp",
  "identifier": [ {
    "use": "official",
    "system": "https://madie.cms.gov/login",
    "value": "CMS2FHIRPCSDepressionScreenAndFollowUp"
  } ],
  "version": "0.4.000",
  "name": "CMS2FHIRPCSDepressionScreenAndFollowUp",
  "title": "CMS2FHIRPCSDepressionScreenAndFollowUp",
  "status": "active",
  "experimental": false,
  "type": {
    "coding": [ {
      "system": "http://terminology.hl7.org/CodeSystem/library-type",
      "code": "logic-library"
    } ]
  },
  "date": "2025-04-28T20:37:03+00:00",
  "publisher": "Centers for Medicare & Medicaid Services (CMS)",
  "description": "CMS2FHIRPCSDepressionScreenAndFollowUp",
  "content": [ {
    "contentType": "text/cql",
    "data": "bGlicmFyeSBDTVMyRkhJUlBDU0RlcHJlc3Npb25TY3JlZW5BbmRGb2xsb3dVcCB2ZXJzaW9uICcwLjQuMDAwJwoKdXNpbmcgUUlDb3JlIHZlcnNpb24gJzYuMC4wJwoKaW5jbHVkZSBGSElSSGVscGVycyB2ZXJzaW9uICc0LjQuMDAwJyBjYWxsZWQgRkhJUkhlbHBlcnMKaW5jbHVkZSBRSUNvcmVDb21tb24gdmVyc2lvbiAnNC4wLjAwMCcgY2FsbGVkIFFJQ29yZUNvbW1vbgppbmNsdWRlIEN1bXVsYXRpdmVNZWRpY2F0aW9uRHVyYXRpb24gdmVyc2lvbiAnNi4wLjAwMCcgY2FsbGVkIENNRAppbmNsdWRlIFN1cHBsZW1lbnRhbERhdGFFbGVtZW50cyB2ZXJzaW9uICc1LjEuMDAwJyBjYWxsZWQgU0RFCgpjb2Rlc3lzdGVtICJMT0lOQyI6ICdodHRwOi8vbG9pbmMub3JnJwpjb2Rlc3lzdGVtICJTTk9NRURDVCI6ICdodHRwOi8vc25vbWVkLmluZm8vc2N0JwoKdmFsdWVzZXQgIkFkb2xlc2NlbnQgRGVwcmVzc2lvbiBNZWRpY2F0aW9ucyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy41MjYuMy4xNTY3Jwp2YWx1ZXNldCAiQWR1bHQgRGVwcmVzc2lvbiBNZWRpY2F0aW9ucyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy41MjYuMy4xNTY2Jwp2YWx1ZXNldCAiQmlwb2xhciBEaXNvcmRlciI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy42Ny4xLjEwMS4xLjEyOCcKdmFsdWVzZXQgIkVuY291bnRlciB0byBTY3JlZW4gZm9yIERlcHJlc3Npb24iOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNjAwLjE5MTYnCnZhbHVlc2V0ICJGb2xsb3cgVXAgZm9yIEFkb2xlc2NlbnQgRGVwcmVzc2lvbiI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy41MjYuMy4xNTY5Jwp2YWx1ZXNldCAiRm9sbG93IFVwIGZvciBBZHVsdCBEZXByZXNzaW9uIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjUyNi4zLjE1NjgnCnZhbHVlc2V0ICJNZWRpY2FsIFJlYXNvbiI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy41MjYuMy4xMDA3Jwp2YWx1ZXNldCAiUGh5c2ljYWwgVGhlcmFweSBFdmFsdWF0aW9uIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjUyNi4zLjEwMjInCnZhbHVlc2V0ICJSZWZlcnJhbCBmb3IgQWRvbGVzY2VudCBEZXByZXNzaW9uIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjUyNi4zLjE1NzAnCnZhbHVlc2V0ICJSZWZlcnJhbCBmb3IgQWR1bHQgRGVwcmVzc2lvbiI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy41MjYuMy4xNTcxJwp2YWx1ZXNldCAiVGVsZXBob25lIFZpc2l0cyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy40NjQuMTAwMy4xMDEuMTIuMTA4MCcKCmNvZGUgIkFkb2xlc2NlbnQgZGVwcmVzc2lvbiBzY3JlZW5pbmcgYXNzZXNzbWVudCI6ICc3MzgzMS0wJyBmcm9tICJMT0lOQyIgZGlzcGxheSAnQWRvbGVzY2VudCBkZXByZXNzaW9uIHNjcmVlbmluZyBhc3Nlc3NtZW50Jwpjb2RlICJBZHVsdCBkZXByZXNzaW9uIHNjcmVlbmluZyBhc3Nlc3NtZW50IjogJzczODMyLTgnIGZyb20gIkxPSU5DIiBkaXNwbGF5ICdBZHVsdCBkZXByZXNzaW9uIHNjcmVlbmluZyBhc3Nlc3NtZW50Jwpjb2RlICJEZXByZXNzaW9uIHNjcmVlbmluZyBkZWNsaW5lZCAoc2l0dWF0aW9uKSI6ICc3MjA4MzQwMDAnIGZyb20gIlNOT01FRENUIiBkaXNwbGF5ICdEZXByZXNzaW9uIHNjcmVlbmluZyBkZWNsaW5lZCAoc2l0dWF0aW9uKScKY29kZSAiRGVwcmVzc2lvbiBzY3JlZW5pbmcgbmVnYXRpdmUgKGZpbmRpbmcpIjogJzQyODE3MTAwMDEyNDEwMicgZnJvbSAiU05PTUVEQ1QiIGRpc3BsYXkgJ0RlcHJlc3Npb24gc2NyZWVuaW5nIG5lZ2F0aXZlIChmaW5kaW5nKScKY29kZSAiRGVwcmVzc2lvbiBzY3JlZW5pbmcgcG9zaXRpdmUgKGZpbmRpbmcpIjogJzQyODE4MTAwMDEyNDEwNCcgZnJvbSAiU05PTUVEQ1QiIGRpc3BsYXkgJ0RlcHJlc3Npb24gc2NyZWVuaW5nIHBvc2l0aXZlIChmaW5kaW5nKScKCnBhcmFtZXRlciAiTWVhc3VyZW1lbnQgUGVyaW9kIiBJbnRlcnZhbDxEYXRlVGltZT4KCmNvbnRleHQgUGF0aWVudAoKZGVmaW5lICJJbml0aWFsIFBvcHVsYXRpb24iOgogICJQYXRpZW50IEFnZSAxMiBZZWFycyBvciBPbGRlciBhdCBTdGFydCBvZiBNZWFzdXJlbWVudCBQZXJpb2QiCiAgICBhbmQgZXhpc3RzICggIlF1YWxpZnlpbmcgRW5jb3VudGVyIER1cmluZyBNZWFzdXJlbWVudCBQZXJpb2QiICkKCmRlZmluZSAiRGVub21pbmF0b3IiOgogICJJbml0aWFsIFBvcHVsYXRpb24iCgpkZWZpbmUgIkRlbm9taW5hdG9yIEV4Y2x1c2lvbnMiOgogIGV4aXN0cyAiSGlzdG9yeSBvZiBCaXBvbGFyIERpYWdub3NpcyBCZWZvcmUgUXVhbGlmeWluZyBFbmNvdW50ZXIiCgpkZWZpbmUgIk51bWVyYXRvciI6CiAgKCAiUGF0aWVudCBBZ2UgMTIgdG8gMTYgWWVhcnMgYXQgU3RhcnQgb2YgTWVhc3VyZW1lbnQgUGVyaW9kIgogICAgICBhbmQgKCAiSGFzIE1vc3QgUmVjZW50IEFkb2xlc2NlbnQgU2NyZWVuaW5nIE5lZ2F0aXZlIgogICAgICAgICAgb3IgZXhpc3RzICJNb3N0IFJlY2VudCBBZG9sZXNjZW50IERlcHJlc3Npb24gU2NyZWVuaW5nIFBvc2l0aXZlIGFuZCBGb2xsb3cgVXAgUHJvdmlkZWQiCiAgICAgICAgICBvciBleGlzdHMgIk1vc3QgUmVjZW50IEFkb2xlc2NlbnQgRGVwcmVzc2lvbiBTY3JlZW5pbmcgUG9zaXRpdmUgYW5kIERlcHJlc3Npb24gTWVkaWNhdGlvbiBBY3RpdmUiCiAgICAgICkKICApCiAgICBvciAoICJQYXRpZW50IEFnZSAxNyBZZWFycyBhdCBTdGFydCBvZiBNZWFzdXJlbWVudCBQZXJpb2QiCiAgICAgICAgYW5kICggIkhhcyBNb3N0IFJlY2VudCBBZG9sZXNjZW50IFNjcmVlbmluZyBOZWdhdGl2ZSIKICAgICAgICAgICAgb3IgZXhpc3RzICJNb3N0IFJlY2VudCBBZG9sZXNjZW50IERlcHJlc3Npb24gU2NyZWVuaW5nIFBvc2l0aXZlIGFuZCBGb2xsb3cgVXAgUHJvdmlkZWQiCiAgICAgICAgICAgIG9yIGV4aXN0cyAiTW9zdCBSZWNlbnQgQWRvbGVzY2VudCBEZXByZXNzaW9uIFNjcmVlbmluZyBQb3NpdGl2ZSBhbmQgRGVwcmVzc2lvbiBNZWRpY2F0aW9uIEFjdGl2ZSIKICAgICAgICAgICAgb3IgIkhhcyBNb3N0IFJlY2VudCBBZHVsdCBTY3JlZW5pbmcgTmVnYXRpdmUiCiAgICAgICAgICAgIG9yIGV4aXN0cyAiTW9zdCBSZWNlbnQgQWR1bHQgRGVwcmVzc2lvbiBTY3JlZW5pbmcgUG9zaXRpdmUgYW5kIEZvbGxvdyBVcCBQcm92aWRlZCIKICAgICAgICAgICAgb3IgZXhpc3RzICJNb3N0IFJlY2VudCBBZHVsdCBEZXByZXNzaW9uIFNjcmVlbmluZyBQb3NpdGl2ZSBhbmQgRGVwcmVzc2lvbiBNZWRpY2F0aW9uIEFjdGl2ZSIKICAgICAgICApCiAgICApCiAgICBvciAoICJQYXRpZW50IEFnZSAxOCBZZWFycyBvciBPbGRlciBhdCBTdGFydCBvZiBNZWFzdXJlbWVudCBQZXJpb2QiCiAgICAgICAgYW5kICggIkhhcyBNb3N0IFJlY2VudCBBZHVsdCBTY3JlZW5pbmcgTmVnYXRpdmUiCiAgICAgICAgICAgIG9yIGV4aXN0cyAiTW9zdCBSZWNlbnQgQWR1bHQgRGVwcmVzc2lvbiBTY3JlZW5pbmcgUG9zaXRpdmUgYW5kIEZvbGxvdyBVcCBQcm92aWRlZCIKICAgICAgICAgICAgb3IgZXhpc3RzICJNb3N0IFJlY2VudCBBZHVsdCBEZXByZXNzaW9uIFNjcmVlbmluZyBQb3NpdGl2ZSBhbmQgRGVwcmVzc2lvbiBNZWRpY2F0aW9uIEFjdGl2ZSIKICAgICAgICApCiAgICApCgpkZWZpbmUgIkRlbm9taW5hdG9yIEV4Y2VwdGlvbnMiOgogICggZXhpc3RzICJNZWRpY2FsIG9yIFBhdGllbnQgUmVhc29uIGZvciBOb3QgU2NyZWVuaW5nIEFkb2xlc2NlbnQgZm9yIERlcHJlc3Npb24iCiAgICAgIGFuZCBub3QgIkhhcyBBZG9sZXNjZW50IERlcHJlc3Npb24gU2NyZWVuaW5nIgogICkKICAgIG9yICggZXhpc3RzICJNZWRpY2FsIG9yIFBhdGllbnQgUmVhc29uIGZvciBOb3QgU2NyZWVuaW5nIEFkdWx0IGZvciBEZXByZXNzaW9uIgogICAgICAgIGFuZCBub3QgIkhhcyBBZHVsdCBEZXByZXNzaW9uIFNjcmVlbmluZyIKICAgICkKCmRlZmluZSAiRm9sbG93IFVwIEludGVydmVudGlvbiBmb3IgUG9zaXRpdmUgQWRvbGVzY2VudCBEZXByZXNzaW9uIFNjcmVlbmluZyI6CiAgKCAoIFtNZWRpY2F0aW9uUmVxdWVzdDogIkFkb2xlc2NlbnQgRGVwcmVzc2lvbiBNZWRpY2F0aW9ucyJdIEFkb2xlc2NlbnRNZWQKICAgICAgICB3aGVyZSBBZG9sZXNjZW50TWVkLnN0YXR1cyBpbiB7ICdhY3RpdmUnLCAnY29tcGxldGVkJyB9CiAgICAgICAgICBhbmQgQWRvbGVzY2VudE1lZC5pbnRlbnQgPSAnb3JkZXInCiAgICApCiAgICAgIHVuaW9uICggW1NlcnZpY2VSZXF1ZXN0OiAiUmVmZXJyYWwgZm9yIEFkb2xlc2NlbnQgRGVwcmVzc2lvbiJdIEFkb2xlc2NlbnRSZWZlcnJhbAogICAgICAgICAgd2hlcmUgQWRvbGVzY2VudFJlZmVycmFsLnN0YXR1cyBpbiB7ICdhY3RpdmUnLCAnY29tcGxldGVkJyB9CiAgICAgICkKICAgICAgdW5pb24gKCBbUHJvY2VkdXJlOiAiRm9sbG93IFVwIGZvciBBZG9sZXNjZW50IERlcHJlc3Npb24iXSBBZG9sZXNjZW50Rm9sbG93VXAKICAgICAgICAgIHdoZXJlIEFkb2xlc2NlbnRGb2xsb3dVcC5zdGF0dXMgPSAnY29tcGxldGVkJwogICAgICApCiAgKQoKZGVmaW5lICJGb2xsb3cgVXAgSW50ZXJ2ZW50aW9uIGZvciBQb3NpdGl2ZSBBZHVsdCBEZXByZXNzaW9uIFNjcmVlbmluZyI6CiAgKCAoIFtNZWRpY2F0aW9uUmVxdWVzdDogIkFkdWx0IERlcHJlc3Npb24gTWVkaWNhdGlvbnMiXSBBZHVsdE1lZAogICAgICAgIHdoZXJlIEFkdWx0TWVkLnN0YXR1cyBpbiB7ICdhY3RpdmUnLCAnY29tcGxldGVkJyB9CiAgICAgICAgICBhbmQgQWR1bHRNZWQuaW50ZW50ID0gJ29yZGVyJwogICAgKQogICAgICB1bmlvbiAoIFtTZXJ2aWNlUmVxdWVzdDogIlJlZmVycmFsIGZvciBBZHVsdCBEZXByZXNzaW9uIl0gQWR1bHRSZWZlcnJhbAogICAgICAgICAgd2hlcmUgQWR1bHRSZWZlcnJhbC5zdGF0dXMgaW4geyAnYWN0aXZlJywgJ2NvbXBsZXRlZCcgfQogICAgICApCiAgICAgIHVuaW9uICggW1Byb2NlZHVyZTogIkZvbGxvdyBVcCBmb3IgQWR1bHQgRGVwcmVzc2lvbiJdIEFkdWx0Rm9sbG93VXAKICAgICAgICAgIHdoZXJlIEFkdWx0Rm9sbG93VXAuc3RhdHVzID0gJ2NvbXBsZXRlZCcKICAgICAgKQogICkKCmRlZmluZSAiSGFzIEFkb2xlc2NlbnQgRGVwcmVzc2lvbiBTY3JlZW5pbmciOgogIGV4aXN0cyAoIFtPYnNlcnZhdGlvblNjcmVlbmluZ0Fzc2Vzc21lbnQ6ICJBZG9sZXNjZW50IGRlcHJlc3Npb24gc2NyZWVuaW5nIGFzc2Vzc21lbnQiXSBBZG9sZXNjZW50U2NyZWVuaW5nCiAgICAgIHdpdGggIlF1YWxpZnlpbmcgRW5jb3VudGVyIER1cmluZyBNZWFzdXJlbWVudCBQZXJpb2QiIFF1YWxpZnlpbmdFbmNvdW50ZXIKICAgICAgICBzdWNoIHRoYXQgQWRvbGVzY2VudFNjcmVlbmluZy5lZmZlY3RpdmUudG9JbnRlcnZhbCAoICkgMTQgZGF5cyBvciBsZXNzIG9uIG9yIGJlZm9yZSBkYXkgb2Ygc3RhcnQgb2YgUXVhbGlmeWluZ0VuY291bnRlci5wZXJpb2QKICAgICAgICAgIGFuZCBBZG9sZXNjZW50U2NyZWVuaW5nLnZhbHVlIGlzIG5vdCBudWxsCiAgICAgICAgICBhbmQgQWRvbGVzY2VudFNjcmVlbmluZy5zdGF0dXMgPSAnZmluYWwnCiAgKQoKZGVmaW5lICJIYXMgQWR1bHQgRGVwcmVzc2lvbiBTY3JlZW5pbmciOgogIGV4aXN0cyAoIFtPYnNlcnZhdGlvblNjcmVlbmluZ0Fzc2Vzc21lbnQ6ICJBZHVsdCBkZXByZXNzaW9uIHNjcmVlbmluZyBhc3Nlc3NtZW50Il0gQWR1bHRTY3JlZW5pbmcKICAgICAgd2l0aCAiUXVhbGlmeWluZyBFbmNvdW50ZXIgRHVyaW5nIE1lYXN1cmVtZW50IFBlcmlvZCIgUXVhbGlmeWluZ0VuY291bnRlcgogICAgICAgIHN1Y2ggdGhhdCBBZHVsdFNjcmVlbmluZy5lZmZlY3RpdmUudG9JbnRlcnZhbCAoICkgMTQgZGF5cyBvciBsZXNzIG9uIG9yIGJlZm9yZSBkYXkgb2Ygc3RhcnQgb2YgUXVhbGlmeWluZ0VuY291bnRlci5wZXJpb2QKICAgICAgICAgIGFuZCBBZHVsdFNjcmVlbmluZy52YWx1ZSBpcyBub3QgbnVsbAogICAgICAgICAgYW5kIEFkdWx0U2NyZWVuaW5nLnN0YXR1cyA9ICdmaW5hbCcKICApCgpkZWZpbmUgIkhhcyBNb3N0IFJlY2VudCBBZG9sZXNjZW50IFNjcmVlbmluZyBOZWdhdGl2ZSI6CiAgKCAiTW9zdCBSZWNlbnQgQWRvbGVzY2VudCBEZXByZXNzaW9uIFNjcmVlbmluZyIgQWRvbGVzY2VudFNjcmVlbgogICAgICB3aGVyZSBBZG9sZXNjZW50U2NyZWVuLnZhbHVlIH4gIkRlcHJlc3Npb24gc2NyZWVuaW5nIG5lZ2F0aXZlIChmaW5kaW5nKSIKICApIGlzIG5vdCBudWxsCgpkZWZpbmUgIkhhcyBNb3N0IFJlY2VudCBBZHVsdCBTY3JlZW5pbmcgTmVnYXRpdmUiOgogICggIk1vc3QgUmVjZW50IEFkdWx0IERlcHJlc3Npb24gU2NyZWVuaW5nIiBBZHVsdFNjcmVlbgogICAgICB3aGVyZSBBZHVsdFNjcmVlbi52YWx1ZSB+ICJEZXByZXNzaW9uIHNjcmVlbmluZyBuZWdhdGl2ZSAoZmluZGluZykiCiAgKSBpcyBub3QgbnVsbAoKZGVmaW5lICJIaXN0b3J5IG9mIEJpcG9sYXIgRGlhZ25vc2lzIEJlZm9yZSBRdWFsaWZ5aW5nIEVuY291bnRlciI6CiAgW0NvbmRpdGlvblByb2JsZW1zSGVhbHRoQ29uY2VybnM6ICJCaXBvbGFyIERpc29yZGVyIl0gQmlwb2xhckRpYWdub3NpcwogICAgd2l0aCAiUXVhbGlmeWluZyBFbmNvdW50ZXIgRHVyaW5nIE1lYXN1cmVtZW50IFBlcmlvZCIgUXVhbGlmeWluZ0VuY291bnRlcgogICAgICBzdWNoIHRoYXQgQmlwb2xhckRpYWdub3Npcy5wcmV2YWxlbmNlSW50ZXJ2YWwgKCApIHN0YXJ0cyBiZWZvcmUgZGF5IG9mIHN0YXJ0IG9mIFF1YWxpZnlpbmdFbmNvdW50ZXIucGVyaW9kCgpkZWZpbmUgIk1lZGljYWwgb3IgUGF0aWVudCBSZWFzb24gZm9yIE5vdCBTY3JlZW5pbmcgQWRvbGVzY2VudCBmb3IgRGVwcmVzc2lvbiI6CiAgW09ic2VydmF0aW9uQ2FuY2VsbGVkOiBjb2RlIH4gIkFkb2xlc2NlbnQgZGVwcmVzc2lvbiBzY3JlZW5pbmcgYXNzZXNzbWVudCJdIE5vQWRvbGVzY2VudFNjcmVlbgogICAgd2l0aCAiUXVhbGlmeWluZyBFbmNvdW50ZXIgRHVyaW5nIE1lYXN1cmVtZW50IFBlcmlvZCIgUXVhbGlmeWluZ0VuY291bnRlcgogICAgICBzdWNoIHRoYXQgTm9BZG9sZXNjZW50U2NyZWVuLmlzc3VlZCBkdXJpbmcgZGF5IG9mIFF1YWxpZnlpbmdFbmNvdW50ZXIucGVyaW9kCiAgICB3aGVyZSAoIE5vQWRvbGVzY2VudFNjcmVlbi5ub3REb25lUmVhc29uIH4gIkRlcHJlc3Npb24gc2NyZWVuaW5nIGRlY2xpbmVkIChzaXR1YXRpb24pIgogICAgICAgIG9yIE5vQWRvbGVzY2VudFNjcmVlbi5ub3REb25lUmVhc29uIGluICJNZWRpY2FsIFJlYXNvbiIKICAgICkKICAgICAgYW5kIE5vQWRvbGVzY2VudFNjcmVlbi5zdGF0dXMgPSAnY2FuY2VsbGVkJwoKZGVmaW5lICJNZWRpY2FsIG9yIFBhdGllbnQgUmVhc29uIGZvciBOb3QgU2NyZWVuaW5nIEFkdWx0IGZvciBEZXByZXNzaW9uIjoKICBbT2JzZXJ2YXRpb25DYW5jZWxsZWQ6IGNvZGUgfiAiQWR1bHQgZGVwcmVzc2lvbiBzY3JlZW5pbmcgYXNzZXNzbWVudCJdIE5vQWR1bHRTY3JlZW4KICAgIHdpdGggIlF1YWxpZnlpbmcgRW5jb3VudGVyIER1cmluZyBNZWFzdXJlbWVudCBQZXJpb2QiIFF1YWxpZnlpbmdFbmNvdW50ZXIKICAgICAgc3VjaCB0aGF0IE5vQWR1bHRTY3JlZW4uaXNzdWVkIGR1cmluZyBkYXkgb2YgUXVhbGlmeWluZ0VuY291bnRlci5wZXJpb2QKICAgIHdoZXJlICggTm9BZHVsdFNjcmVlbi5ub3REb25lUmVhc29uIH4gIkRlcHJlc3Npb24gc2NyZWVuaW5nIGRlY2xpbmVkIChzaXR1YXRpb24pIgogICAgICAgIG9yIE5vQWR1bHRTY3JlZW4ubm90RG9uZVJlYXNvbiBpbiAiTWVkaWNhbCBSZWFzb24iCiAgICApCiAgICAgIGFuZCBOb0FkdWx0U2NyZWVuLnN0YXR1cyA9ICdjYW5jZWxsZWQnCgpkZWZpbmUgIk1vc3QgUmVjZW50IEFkb2xlc2NlbnQgRGVwcmVzc2lvbiBTY3JlZW5pbmciOgogIExhc3QoW09ic2VydmF0aW9uU2NyZWVuaW5nQXNzZXNzbWVudDogIkFkb2xlc2NlbnQgZGVwcmVzc2lvbiBzY3JlZW5pbmcgYXNzZXNzbWVudCJdIEFkb2xlc2NlbnREZXByZXNzaW9uU2NyZWVuaW5nCiAgICAgIHdpdGggIlF1YWxpZnlpbmcgRW5jb3VudGVyIER1cmluZyBNZWFzdXJlbWVudCBQZXJpb2QiIFF1YWxpZnlpbmdFbmNvdW50ZXIKICAgICAgICBzdWNoIHRoYXQgQWRvbGVzY2VudERlcHJlc3Npb25TY3JlZW5pbmcuZWZmZWN0aXZlLnRvSW50ZXJ2YWwoKSAxNCBkYXlzIG9yIGxlc3Mgb24gb3IgYmVmb3JlIGRheSBvZiBzdGFydCBvZiBRdWFsaWZ5aW5nRW5jb3VudGVyLnBlcmlvZAogICAgICAgICAgYW5kIEFkb2xlc2NlbnREZXByZXNzaW9uU2NyZWVuaW5nLnZhbHVlIGlzIG5vdCBudWxsCiAgICAgICAgICBhbmQgQWRvbGVzY2VudERlcHJlc3Npb25TY3JlZW5pbmcuc3RhdHVzID0gJ2ZpbmFsJwogICAgICBzb3J0IGJ5IHN0YXJ0IG9mIGVmZmVjdGl2ZS50b0ludGVydmFsKCkKICApCgpkZWZpbmUgIk1vc3QgUmVjZW50IEFkb2xlc2NlbnQgRGVwcmVzc2lvbiBTY3JlZW5pbmcgUG9zaXRpdmUgYW5kIERlcHJlc3Npb24gTWVkaWNhdGlvbiBBY3RpdmUiOgogIGZyb20KICAgIFtNZWRpY2F0aW9uUmVxdWVzdDogIkFkb2xlc2NlbnQgRGVwcmVzc2lvbiBNZWRpY2F0aW9ucyJdIEFjdGl2ZUFkb2xlc2NlbnRNZWRpY2F0aW9ucywKICAgICJNb3N0IFJlY2VudCBBZG9sZXNjZW50IERlcHJlc3Npb24gU2NyZWVuaW5nIiBMYXN0QWRvbGVzY2VudFNjcmVlbiwKICAgICJRdWFsaWZ5aW5nIEVuY291bnRlciBEdXJpbmcgTWVhc3VyZW1lbnQgUGVyaW9kIiBRdWFsaWZ5aW5nRW5jb3VudGVyCiAgICB3aGVyZSBMYXN0QWRvbGVzY2VudFNjcmVlbi5lZmZlY3RpdmUudG9JbnRlcnZhbCAoICkgc3RhcnRzIDE0IGRheXMgb3IgbGVzcyBvbiBvciBiZWZvcmUgZGF5IG9mIHN0YXJ0IG9mIFF1YWxpZnlpbmdFbmNvdW50ZXIucGVyaW9kCiAgICAgIGFuZCBMYXN0QWRvbGVzY2VudFNjcmVlbi52YWx1ZSB+ICJEZXByZXNzaW9uIHNjcmVlbmluZyBwb3NpdGl2ZSAoZmluZGluZykiCiAgICAgIGFuZCBBY3RpdmVBZG9sZXNjZW50TWVkaWNhdGlvbnMuc3RhdHVzIGluIHsgJ2FjdGl2ZScsICdjb21wbGV0ZWQnIH0KICAgICAgYW5kIEFjdGl2ZUFkb2xlc2NlbnRNZWRpY2F0aW9ucy5pbnRlbnQgPSAnb3JkZXInCiAgICAgIGFuZCBBY3RpdmVBZG9sZXNjZW50TWVkaWNhdGlvbnMubWVkaWNhdGlvblJlcXVlc3RQZXJpb2QgKCApLnRvSW50ZXJ2YWwgKCApIG92ZXJsYXBzIGFmdGVyIGRheSBvZiBRdWFsaWZ5aW5nRW5jb3VudGVyLnBlcmlvZAoKZGVmaW5lICJNb3N0IFJlY2VudCBBZG9sZXNjZW50IERlcHJlc3Npb24gU2NyZWVuaW5nIFBvc2l0aXZlIGFuZCBGb2xsb3cgVXAgUHJvdmlkZWQiOgogIGZyb20KICAgICJNb3N0IFJlY2VudCBBZG9sZXNjZW50IERlcHJlc3Npb24gU2NyZWVuaW5nIiBMYXN0QWRvbGVzY2VudFNjcmVlbiwKICAgICJGb2xsb3cgVXAgSW50ZXJ2ZW50aW9uIGZvciBQb3NpdGl2ZSBBZG9sZXNjZW50IERlcHJlc3Npb24gU2NyZWVuaW5nIiBGb2xsb3dVcFBvc2l0aXZlQWRvbGVzY2VudFNjcmVlbiwKICAgICJRdWFsaWZ5aW5nIEVuY291bnRlciBEdXJpbmcgTWVhc3VyZW1lbnQgUGVyaW9kIiBRdWFsaWZ5aW5nRW5jb3VudGVyCiAgICB3aGVyZSBMYXN0QWRvbGVzY2VudFNjcmVlbi5lZmZlY3RpdmUudG9JbnRlcnZhbCAoICkgc3RhcnRzIDE0IGRheXMgb3IgbGVzcyBvbiBvciBiZWZvcmUgZGF5IG9mIHN0YXJ0IG9mIFF1YWxpZnlpbmdFbmNvdW50ZXIucGVyaW9kCiAgICAgIGFuZCBMYXN0QWRvbGVzY2VudFNjcmVlbi52YWx1ZSB+ICJEZXByZXNzaW9uIHNjcmVlbmluZyBwb3NpdGl2ZSAoZmluZGluZykiCiAgICAgIGFuZCAoIHN0YXJ0IG9mIEZvbGxvd1VwUG9zaXRpdmVBZG9sZXNjZW50U2NyZWVuLnBlcmZvcm1lZC50b0ludGVydmFsICggKSBkdXJpbmcgUXVhbGlmeWluZ0VuY291bnRlci5wZXJpb2QKICAgICAgICAgIG9yIEZvbGxvd1VwUG9zaXRpdmVBZG9sZXNjZW50U2NyZWVuLmF1dGhvcmVkT24gMiBkYXlzIG9yIGxlc3Mgb24gb3IgYWZ0ZXIgZGF5IG9mIGVuZCBvZiBRdWFsaWZ5aW5nRW5jb3VudGVyLnBlcmlvZAogICAgICApCiAgICAgIGFuZCAoIENvYWxlc2NlKHN0YXJ0IG9mIEZvbGxvd1VwUG9zaXRpdmVBZG9sZXNjZW50U2NyZWVuLnBlcmZvcm1lZC50b0ludGVydmFsKCksIEZvbGxvd1VwUG9zaXRpdmVBZG9sZXNjZW50U2NyZWVuLmF1dGhvcmVkT24pIGR1cmluZyBkYXkgb2YgIk1lYXN1cmVtZW50IFBlcmlvZCIgKQoKZGVmaW5lICJNb3N0IFJlY2VudCBBZHVsdCBEZXByZXNzaW9uIFNjcmVlbmluZyI6CiAgTGFzdChbT2JzZXJ2YXRpb25TY3JlZW5pbmdBc3Nlc3NtZW50OiAiQWR1bHQgZGVwcmVzc2lvbiBzY3JlZW5pbmcgYXNzZXNzbWVudCJdIEFkdWx0RGVwcmVzc2lvblNjcmVlbmluZwogICAgICB3aXRoICJRdWFsaWZ5aW5nIEVuY291bnRlciBEdXJpbmcgTWVhc3VyZW1lbnQgUGVyaW9kIiBRdWFsaWZ5aW5nRW5jb3VudGVyCiAgICAgICAgc3VjaCB0aGF0IEFkdWx0RGVwcmVzc2lvblNjcmVlbmluZy5lZmZlY3RpdmUudG9JbnRlcnZhbCgpIDE0IGRheXMgb3IgbGVzcyBvbiBvciBiZWZvcmUgZGF5IG9mIHN0YXJ0IG9mIFF1YWxpZnlpbmdFbmNvdW50ZXIucGVyaW9kCiAgICAgICAgICBhbmQgQWR1bHREZXByZXNzaW9uU2NyZWVuaW5nLnZhbHVlIGlzIG5vdCBudWxsCiAgICAgICAgICBhbmQgQWR1bHREZXByZXNzaW9uU2NyZWVuaW5nLnN0YXR1cyA9ICdmaW5hbCcKICAgICAgc29ydCBieSBzdGFydCBvZiBlZmZlY3RpdmUudG9JbnRlcnZhbCgpCiAgKQoKZGVmaW5lICJNb3N0IFJlY2VudCBBZHVsdCBEZXByZXNzaW9uIFNjcmVlbmluZyBQb3NpdGl2ZSBhbmQgRGVwcmVzc2lvbiBNZWRpY2F0aW9uIEFjdGl2ZSI6CiAgZnJvbQogICAgW01lZGljYXRpb25SZXF1ZXN0OiAiQWR1bHQgRGVwcmVzc2lvbiBNZWRpY2F0aW9ucyJdIEFjdGl2ZUFkdWx0TWVkaWNhdGlvbnMsCiAgICAiTW9zdCBSZWNlbnQgQWR1bHQgRGVwcmVzc2lvbiBTY3JlZW5pbmciIExhc3RBZHVsdFNjcmVlbiwKICAgICJRdWFsaWZ5aW5nIEVuY291bnRlciBEdXJpbmcgTWVhc3VyZW1lbnQgUGVyaW9kIiBRdWFsaWZ5aW5nRW5jb3VudGVyCiAgICB3aGVyZSBMYXN0QWR1bHRTY3JlZW4uZWZmZWN0aXZlLnRvSW50ZXJ2YWwgKCApIHN0YXJ0cyAxNCBkYXlzIG9yIGxlc3Mgb24gb3IgYmVmb3JlIGRheSBvZiBzdGFydCBvZiBRdWFsaWZ5aW5nRW5jb3VudGVyLnBlcmlvZAogICAgICBhbmQgTGFzdEFkdWx0U2NyZWVuLnZhbHVlIH4gIkRlcHJlc3Npb24gc2NyZWVuaW5nIHBvc2l0aXZlIChmaW5kaW5nKSIKICAgICAgYW5kIEFjdGl2ZUFkdWx0TWVkaWNhdGlvbnMuc3RhdHVzIGluIHsgJ2FjdGl2ZScsICdjb21wbGV0ZWQnIH0KICAgICAgYW5kIEFjdGl2ZUFkdWx0TWVkaWNhdGlvbnMuaW50ZW50ID0gJ29yZGVyJwogICAgICBhbmQgQWN0aXZlQWR1bHRNZWRpY2F0aW9ucy5tZWRpY2F0aW9uUmVxdWVzdFBlcmlvZCAoICkudG9JbnRlcnZhbCAoICkgb3ZlcmxhcHMgYWZ0ZXIgZGF5IG9mIFF1YWxpZnlpbmdFbmNvdW50ZXIucGVyaW9kCgpkZWZpbmUgIk1vc3QgUmVjZW50IEFkdWx0IERlcHJlc3Npb24gU2NyZWVuaW5nIFBvc2l0aXZlIGFuZCBGb2xsb3cgVXAgUHJvdmlkZWQiOgogIGZyb20KICAgICJNb3N0IFJlY2VudCBBZHVsdCBEZXByZXNzaW9uIFNjcmVlbmluZyIgTGFzdEFkdWx0U2NyZWVuLAogICAgIkZvbGxvdyBVcCBJbnRlcnZlbnRpb24gZm9yIFBvc2l0aXZlIEFkdWx0IERlcHJlc3Npb24gU2NyZWVuaW5nIiBGb2xsb3dVcFBvc2l0aXZlQWR1bHRTY3JlZW4sCiAgICAiUXVhbGlmeWluZyBFbmNvdW50ZXIgRHVyaW5nIE1lYXN1cmVtZW50IFBlcmlvZCIgUXVhbGlmeWluZ0VuY291bnRlcgogICAgd2hlcmUgTGFzdEFkdWx0U2NyZWVuLmVmZmVjdGl2ZS50b0ludGVydmFsICggKSBzdGFydHMgMTQgZGF5cyBvciBsZXNzIG9uIG9yIGJlZm9yZSBkYXkgb2Ygc3RhcnQgb2YgUXVhbGlmeWluZ0VuY291bnRlci5wZXJpb2QKICAgICAgYW5kIExhc3RBZHVsdFNjcmVlbi52YWx1ZSB+ICJEZXByZXNzaW9uIHNjcmVlbmluZyBwb3NpdGl2ZSAoZmluZGluZykiCiAgICAgIGFuZCAoIHN0YXJ0IG9mIEZvbGxvd1VwUG9zaXRpdmVBZHVsdFNjcmVlbi5wZXJmb3JtZWQudG9JbnRlcnZhbCAoICkgZHVyaW5nIFF1YWxpZnlpbmdFbmNvdW50ZXIucGVyaW9kCiAgICAgICAgICBvciBGb2xsb3dVcFBvc2l0aXZlQWR1bHRTY3JlZW4uYXV0aG9yZWRPbiAyIGRheXMgb3IgbGVzcyBvbiBvciBhZnRlciBkYXkgb2YgZW5kIG9mIFF1YWxpZnlpbmdFbmNvdW50ZXIucGVyaW9kCiAgICAgICkKICAgICAgYW5kICggQ29hbGVzY2Uoc3RhcnQgb2YgRm9sbG93VXBQb3NpdGl2ZUFkdWx0U2NyZWVuLnBlcmZvcm1lZC50b0ludGVydmFsKCksIEZvbGxvd1VwUG9zaXRpdmVBZHVsdFNjcmVlbi5hdXRob3JlZE9uKSBkdXJpbmcgZGF5IG9mICJNZWFzdXJlbWVudCBQZXJpb2QiICkKCmRlZmluZSAiUGF0aWVudCBBZ2UgMTIgdG8gMTYgWWVhcnMgYXQgU3RhcnQgb2YgTWVhc3VyZW1lbnQgUGVyaW9kIjoKICBBZ2VJblllYXJzQXQoZGF0ZSBmcm9tIHN0YXJ0IG9mICJNZWFzdXJlbWVudCBQZXJpb2QiKSBpbiBJbnRlcnZhbFsxMiwgMTZdCgpkZWZpbmUgIlBhdGllbnQgQWdlIDEyIFllYXJzIG9yIE9sZGVyIGF0IFN0YXJ0IG9mIE1lYXN1cmVtZW50IFBlcmlvZCI6CiAgQWdlSW5ZZWFyc0F0KGRhdGUgZnJvbSBzdGFydCBvZiAiTWVhc3VyZW1lbnQgUGVyaW9kIikgPj0gMTIKCmRlZmluZSAiUGF0aWVudCBBZ2UgMTcgWWVhcnMgYXQgU3RhcnQgb2YgTWVhc3VyZW1lbnQgUGVyaW9kIjoKICBBZ2VJblllYXJzQXQoZGF0ZSBmcm9tIHN0YXJ0IG9mICJNZWFzdXJlbWVudCBQZXJpb2QiKSA9IDE3CgpkZWZpbmUgIlBhdGllbnQgQWdlIDE4IFllYXJzIG9yIE9sZGVyIGF0IFN0YXJ0IG9mIE1lYXN1cmVtZW50IFBlcmlvZCI6CiAgQWdlSW5ZZWFyc0F0KGRhdGUgZnJvbSBzdGFydCBvZiAiTWVhc3VyZW1lbnQgUGVyaW9kIikgPj0gMTgKCmRlZmluZSAiUXVhbGlmeWluZyBFbmNvdW50ZXIgRHVyaW5nIE1lYXN1cmVtZW50IFBlcmlvZCI6CiAgKCBbRW5jb3VudGVyOiB0eXBlIGluICJFbmNvdW50ZXIgdG8gU2NyZWVuIGZvciBEZXByZXNzaW9uIl0KICAgIHVuaW9uIFtFbmNvdW50ZXI6IHR5cGUgaW4gIlBoeXNpY2FsIFRoZXJhcHkgRXZhbHVhdGlvbiJdCiAgICB1bmlvbiBbRW5jb3VudGVyOiB0eXBlIGluICJUZWxlcGhvbmUgVmlzaXRzIl0gKSBRdWFsaWZ5aW5nRW5jb3VudGVyCiAgICB3aGVyZSBRdWFsaWZ5aW5nRW5jb3VudGVyLnBlcmlvZCBkdXJpbmcgZGF5IG9mICJNZWFzdXJlbWVudCBQZXJpb2QiCiAgICAgIGFuZCBRdWFsaWZ5aW5nRW5jb3VudGVyLnN0YXR1cyA9ICdmaW5pc2hlZCcKCmRlZmluZSAiU0RFIEV0aG5pY2l0eSI6CiAgU0RFLiJTREUgRXRobmljaXR5IgoKZGVmaW5lICJTREUgUGF5ZXIiOgogIFNERS4iU0RFIFBheWVyIgoKZGVmaW5lICJTREUgUmFjZSI6CiAgU0RFLiJTREUgUmFjZSIKCmRlZmluZSAiU0RFIFNleCI6CiAgU0RFLiJTREUgU2V4Ig=="
  } ]
}